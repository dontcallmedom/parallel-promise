{
  "spec": {
    "title": "Pointer Events",
    "url": "https://w3c.github.io/pointerevents/"
  },
  "algorithms": [
    {
      "html": "The user agent <em class=\"rfc2119\">MUST<!---0.509363%--></em> run the following steps when <a href=\"https://w3c.github.io/pointerevents/#dfn-implicitly-release-the-pointer-capture\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-implicitly-release-the-pointer-capture-1\">implicitly releasing pointer capture</a> as well as when firing Pointer Events that are not <!---0.509363%--><a data-link-type=\"idl\" data-xref-type=\"attribute|dict-member|const\" data-link-for=\"GlobalEventHandlers\" data-xref-for=\"GlobalEventHandlers\" href=\"https://w3c.github.io/pointerevents/#dfn-gotpointercapture\" class=\"internalDFN\" id=\"ref-for-dfn-gotpointercapture-5\"><code>gotpointercapture<!---0.509363%--></code></a><!---0.509363%--> or <!---0.509363%--><a data-link-type=\"idl\" data-xref-type=\"attribute|dict-member|const\" data-link-for=\"GlobalEventHandlers\" data-xref-for=\"GlobalEventHandlers\" href=\"https://w3c.github.io/pointerevents/#dfn-lostpointercapture\" class=\"internalDFN\" id=\"ref-for-dfn-lostpointercapture-5\"><code>lostpointercapture<!---0.509363%--></code></a><!---0.509363%-->.",
      "rationale": "if",
      "steps": [
        {
          "html": "If the <a href=\"https://w3c.github.io/pointerevents/#dfn-pointer-capture-target-override\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-pointer-capture-target-override-4\">pointer capture target override</a> for this pointer is set and is not equal to the <a href=\"https://w3c.github.io/pointerevents/#dfn-pending-pointer-capture-target-override\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-pending-pointer-capture-target-override-1\">pending pointer capture target override</a>, then fire a pointer event named <!---0.509363%--><a data-link-type=\"idl\" data-xref-type=\"attribute|dict-member|const\" data-link-for=\"GlobalEventHandlers\" data-xref-for=\"GlobalEventHandlers\" href=\"https://w3c.github.io/pointerevents/#dfn-lostpointercapture\" class=\"internalDFN\" id=\"ref-for-dfn-lostpointercapture-6\"><code>lostpointercapture<!---0.509363%--></code></a><!---0.509363%--> at the <a href=\"https://w3c.github.io/pointerevents/#dfn-pointer-capture-target-override\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-pointer-capture-target-override-5\">pointer capture target override</a> node."
        },
        {
          "html": "If the <a href=\"https://w3c.github.io/pointerevents/#dfn-pending-pointer-capture-target-override\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-pending-pointer-capture-target-override-2\">pending pointer capture target override</a> for this pointer is set and is not equal to the <a href=\"https://w3c.github.io/pointerevents/#dfn-pointer-capture-target-override\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-pointer-capture-target-override-6\">pointer capture target override</a>, then fire a pointer event named <!---0.509363%--><a data-link-type=\"idl\" data-xref-type=\"attribute|dict-member|const\" data-link-for=\"GlobalEventHandlers\" data-xref-for=\"GlobalEventHandlers\" href=\"https://w3c.github.io/pointerevents/#dfn-gotpointercapture\" class=\"internalDFN\" id=\"ref-for-dfn-gotpointercapture-6\"><code>gotpointercapture<!---0.509363%--></code></a><!---0.509363%--> at the <a href=\"https://w3c.github.io/pointerevents/#dfn-pending-pointer-capture-target-override\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-pending-pointer-capture-target-override-3\">pending pointer capture target override</a>."
        },
        {
          "html": "Set the <dfn id=\"dfn-pointer-capture-target-override\" tabindex=\"0\" aria-haspopup=\"dialog\" data-dfn-type=\"dfn\">pointer capture target override</dfn> to the <a href=\"https://w3c.github.io/pointerevents/#dfn-pending-pointer-capture-target-override\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-pending-pointer-capture-target-override-4\">pending pointer capture target override</a>, if set. Otherwise, clear the <a href=\"https://w3c.github.io/pointerevents/#dfn-pointer-capture-target-override\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-pointer-capture-target-override-7\">pointer capture target override</a>."
        }
      ]
    },
    {
      "html": "A <code>click</code>, <code>auxclick</code> or <code>contextmenu</code> event <em class=\"rfc2119\">MUST<!---0.509363%--></em> follow the dispatch process defined in the [<cite><a class=\"bibref\" data-link-type=\"biblio\" href=\"https://w3c.github.io/pointerevents/#bib-uievents\" title=\"UI Events\">UIEVENTS<!---0.509363%--></a></cite><!---0.509363%-->] spec except that the event target is overridden using the algorithm below:",
      "rationale": "let",
      "steps": [
        {
          "html": "<p>Let <var>event<!---0.509363%--></var> be the <code>click</code>, <code>auxclick</code> or <code>contextmenu</code> event being dispatched, and <var>userEvent<!---0.509363%--></var> be the user interaction event that caused the firing of <var>event<!---0.509363%--></var>.</p>"
        },
        {
          "html": "If <var>userEvent<!---0.509363%--></var> is not a <code>PointerEvent</code>, dispatch <var>event<!---0.509363%--></var> following the [<cite><a class=\"bibref\" data-link-type=\"biblio\" href=\"https://w3c.github.io/pointerevents/#bib-uievents\" title=\"UI Events\">UIEVENTS<!---0.509363%--></a></cite><!---0.509363%-->] spec without overriding <var>event<!---0.509363%--></var> target and skip the remaining steps below."
        },
        {
          "html": "<p>Define <var>target<!---0.509363%--></var> as follows:</p>\n\n                            <p>If <var>event<!---0.509363%--></var> is a <code>contextmenu</code> event, or <var>userEvent<!---0.509363%--></var> was dispatched while the corresponding pointer was captured, then let <var>target<!---0.509363%--></var> be the target of <var>userEvent<!---0.509363%--></var>.</p>\n\n                            <p>Otherwise (<var>event<!---0.509363%--></var> is a <code>click</code> or <code>auxclick</code> event for which <var>userEvent<!---0.509363%--></var> is a <code>pointerup</code> event that was dispatched uncaptured) let <var>target<!---0.509363%--></var> be the nearest common inclusive ancestor of the corresponding <code>pointerdown</code> and <code>pointerup</code> targets in the DOM at the moment <var>event<!---0.509363%--></var> is being dispatched.</p>"
        },
        {
          "html": "<p>Dispatch <var>event<!---0.509363%--></var> to <var>target<!---0.509363%--></var> following the [<cite><a class=\"bibref\" data-link-type=\"biblio\" href=\"https://w3c.github.io/pointerevents/#bib-uievents\" title=\"UI Events\">UIEVENTS<!---0.509363%--></a></cite><!---0.509363%-->] spec.</p>"
        }
      ]
    },
    {
      "html": "Pointer capture is set on an <var>element<!---0.509363%--></var> of type <a data-xref-type=\"_IDL_\" data-link-type=\"idl\" data-lt=\"Element\" data-cite=\"dom\" data-cite-path=\"/\" data-cite-frag=\"element\" data-type=\"interface\" href=\"https://dom.spec.whatwg.org/#element\"><code>Element<!---0.509363%--></code></a><!---0.509363%--> by calling the <code>element.setPointerCapture(pointerId)</code> method.\n                When this method is invoked, the user agent <em class=\"rfc2119\">MUST<!---0.509363%--></em> run the following steps:",
      "rationale": "if",
      "steps": [
        {
          "html": "If the <code>pointerId</code> provided as the method's argument does not match any of the <a data-lt=\"active pointer\" href=\"https://w3c.github.io/pointerevents/#dfn-active-pointer\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-active-pointer-5\">active pointers</a>, then <a data-link-type=\"dfn|abstract-op\" data-link-for=\"exception\" data-xref-for=\"exception\" data-cite=\"webidl\" data-cite-path=\"/\" data-cite-frag=\"dfn-throw\" data-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\">throw<!---0.509363%--></a> a \"<a data-link-type=\"idl\" data-cite=\"webidl\" data-xref-type=\"exception\" data-cite-path=\"/\" data-cite-frag=\"notfounderror\" data-type=\"exception\" href=\"https://webidl.spec.whatwg.org/#notfounderror\"><code>NotFoundError<!---0.509363%--></code></a>\"<!---0.509363%--> <a data-xref-type=\"_IDL_\" data-link-type=\"idl\" data-lt=\"DOMException\" data-cite=\"webidl\" data-cite-path=\"/\" data-cite-frag=\"idl-DOMException\" data-type=\"interface\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\"><code>DOMException<!---0.509363%--></code></a><!---0.509363%-->."
        },
        {
          "html": "Let the <var>pointer<!---0.509363%--></var> be the <a href=\"https://w3c.github.io/pointerevents/#dfn-active-pointer\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-active-pointer-6\">active pointer</a> specified by the given <code>pointerId</code>."
        },
        {
          "html": "If the <var>element<!---0.509363%--></var> is not <a data-link-type=\"dfn|abstract-op\" data-cite=\"dom\" data-cite-path=\"/\" data-cite-frag=\"connected\" data-type=\"dfn\" href=\"https://dom.spec.whatwg.org/#connected\">connected<!---0.509363%--></a> [<cite><a class=\"bibref\" data-link-type=\"biblio\" href=\"https://w3c.github.io/pointerevents/#bib-dom\" title=\"DOM Standard\">DOM<!---0.509363%--></a></cite><!---0.509363%-->], <a data-link-type=\"dfn|abstract-op\" data-link-for=\"exception\" data-xref-for=\"exception\" data-cite=\"webidl\" data-cite-path=\"/\" data-cite-frag=\"dfn-throw\" data-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\">throw<!---0.509363%--></a> an \"<a data-link-type=\"idl\" data-cite=\"webidl\" data-xref-type=\"exception\" data-cite-path=\"/\" data-cite-frag=\"invalidstateerror\" data-type=\"exception\" href=\"https://webidl.spec.whatwg.org/#invalidstateerror\"><code>InvalidStateError<!---0.509363%--></code></a>\"<!---0.509363%--> <a data-xref-type=\"_IDL_\" data-link-type=\"idl\" data-lt=\"DOMException\" data-cite=\"webidl\" data-cite-path=\"/\" data-cite-frag=\"idl-DOMException\" data-type=\"interface\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\"><code>DOMException<!---0.509363%--></code></a><!---0.509363%-->."
        },
        {
          "html": "If this method is invoked while the <var>element<!---0.509363%--></var>'s <a data-link-type=\"dfn|abstract-op\" data-link-for=\"Node\" data-xref-for=\"Node\" data-cite=\"dom\" data-cite-path=\"/\" data-cite-frag=\"concept-node-document\" data-type=\"dfn\" href=\"https://dom.spec.whatwg.org/#concept-node-document\">node document<!---0.509363%--></a> [<cite><a class=\"bibref\" data-link-type=\"biblio\" href=\"https://w3c.github.io/pointerevents/#bib-dom\" title=\"DOM Standard\">DOM<!---0.509363%--></a></cite><!---0.509363%-->] has a locked element ([<cite><a class=\"bibref\" data-link-type=\"biblio\" href=\"https://w3c.github.io/pointerevents/#bib-pointerlock\" title=\"Pointer Lock\">PointerLock<!---0.509363%--></a></cite><!---0.509363%-->] <!---0.509363%--><a data-link-type=\"idl\" data-xref-type=\"attribute|dict-member|const\" data-link-for=\"DocumentOrShadowRoot\" data-xref-for=\"DocumentOrShadowRoot\" data-cite=\"pointerlock\" data-cite-path=\"/\" data-cite-frag=\"dom-documentorshadowroot-pointerlockelement\" data-type=\"attribute\" href=\"https://www.w3.org/TR/pointerlock/#dom-documentorshadowroot-pointerlockelement\"><code>pointerLockElement<!---0.509363%--></code></a><!---0.509363%-->),\n                    <a data-link-type=\"dfn|abstract-op\" data-link-for=\"exception\" data-xref-for=\"exception\" data-cite=\"webidl\" data-cite-path=\"/\" data-cite-frag=\"dfn-throw\" data-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\">throw<!---0.509363%--></a> an \"<a data-link-type=\"idl\" data-cite=\"webidl\" data-xref-type=\"exception\" data-cite-path=\"/\" data-cite-frag=\"invalidstateerror\" data-type=\"exception\" href=\"https://webidl.spec.whatwg.org/#invalidstateerror\"><code>InvalidStateError<!---0.509363%--></code></a>\"<!---0.509363%--> <a data-xref-type=\"_IDL_\" data-link-type=\"idl\" data-lt=\"DOMException\" data-cite=\"webidl\" data-cite-path=\"/\" data-cite-frag=\"idl-DOMException\" data-type=\"interface\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\"><code>DOMException<!---0.509363%--></code></a><!---0.509363%-->."
        },
        {
          "html": "If the <var>pointer<!---0.509363%--></var> is not in the <a href=\"https://w3c.github.io/pointerevents/#dfn-active-buttons-state\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-active-buttons-state-5\">active buttons state</a> or\n                    the <var>element<!---0.509363%--></var>'s <a data-link-type=\"dfn|abstract-op\" data-link-for=\"Node\" data-xref-for=\"Node\" data-cite=\"dom\" data-cite-path=\"/\" data-cite-frag=\"concept-node-document\" data-type=\"dfn\" href=\"https://dom.spec.whatwg.org/#concept-node-document\">node document<!---0.509363%--></a> is not the <a href=\"https://w3c.github.io/pointerevents/#dfn-active-document\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-active-document-2\">active document</a> of the <var>pointer<!---0.509363%--></var>, then terminate these steps."
        },
        {
          "html": "For the specified <code>pointerId</code>, set the <dfn id=\"dfn-pending-pointer-capture-target-override\" tabindex=\"0\" aria-haspopup=\"dialog\" data-dfn-type=\"dfn\">pending pointer capture target override</dfn> to the <a data-xref-type=\"_IDL_\" data-link-type=\"idl\" data-lt=\"Element\" data-cite=\"dom\" data-cite-path=\"/\" data-cite-frag=\"element\" data-type=\"interface\" href=\"https://dom.spec.whatwg.org/#element\"><code>Element<!---0.509363%--></code></a><!---0.509363%--> on which this method was invoked."
        }
      ]
    },
    {
      "html": "Pointer capture is released on an element explicitly by calling the <code>element.releasePointerCapture(pointerId)</code> method. When this method is called, the user agent <em class=\"rfc2119\">MUST<!---0.509363%--></em> run the following steps:",
      "rationale": "if",
      "steps": [
        {
          "html": "If the <code>pointerId</code> provided as the method's argument does not match any of the <a data-lt=\"active pointer\" href=\"https://w3c.github.io/pointerevents/#dfn-active-pointer\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-active-pointer-7\">active pointers</a> and these steps are not being invoked as a result of the <a href=\"https://w3c.github.io/pointerevents/#dfn-implicitly-release-the-pointer-capture\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-implicitly-release-the-pointer-capture-5\">implicit release of pointer capture</a>, then <a data-link-type=\"dfn|abstract-op\" data-link-for=\"exception\" data-xref-for=\"exception\" data-cite=\"webidl\" data-cite-path=\"/\" data-cite-frag=\"dfn-throw\" data-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\">throw<!---0.509363%--></a> a \"<a data-link-type=\"idl\" data-cite=\"webidl\" data-xref-type=\"exception\" data-cite-path=\"/\" data-cite-frag=\"notfounderror\" data-type=\"exception\" href=\"https://webidl.spec.whatwg.org/#notfounderror\"><code>NotFoundError<!---0.509363%--></code></a>\"<!---0.509363%--> <a data-xref-type=\"_IDL_\" data-link-type=\"idl\" data-lt=\"DOMException\" data-cite=\"webidl\" data-cite-path=\"/\" data-cite-frag=\"idl-DOMException\" data-type=\"interface\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\"><code>DOMException<!---0.509363%--></code></a><!---0.509363%-->."
        },
        {
          "html": "If <a data-lt=\"Element.hasPointerCapture\" href=\"https://w3c.github.io/pointerevents/#dom-element-haspointercapture\" class=\"internalDFN\" data-link-type=\"idl\" id=\"ref-for-dom-element-haspointercapture-2\"><code>hasPointerCapture</code></a> is false for the <a data-xref-type=\"_IDL_\" data-link-type=\"idl\" data-lt=\"Element\" data-cite=\"dom\" data-cite-path=\"/\" data-cite-frag=\"element\" data-type=\"interface\" href=\"https://dom.spec.whatwg.org/#element\"><code>Element<!---0.509363%--></code></a><!---0.509363%--> with the specified <code>pointerId</code>, then terminate these steps."
        },
        {
          "html": "For the specified <code>pointerId</code>, clear the <a href=\"https://w3c.github.io/pointerevents/#dfn-pending-pointer-capture-target-override\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-pending-pointer-capture-target-override-6\">pending pointer capture target override</a>, if set."
        }
      ]
    },
    {
      "html": "When a trusted <a href=\"https://w3c.github.io/pointerevents/#dom-pointerevent\" class=\"internalDFN\" data-link-type=\"idl\" id=\"ref-for-dom-pointerevent-15\"><code>PointerEvent</code></a> is created, user agents <em class=\"rfc2119\">SHOULD<!---0.509363%--></em> run the following steps for each event in the\n            <a href=\"https://w3c.github.io/pointerevents/#dfn-coalesced-events-list\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-coalesced-events-list-6\">coalesced events list</a> and <a href=\"https://w3c.github.io/pointerevents/#dfn-predicted-events-list\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-predicted-events-list-6\">predicted events list</a>:",
      "rationale": "set",
      "steps": [
        {
          "html": "Set the event's <code>pointerId</code>, <code> pointerType</code>,\n                <code>isPrimary</code> and <!---0.509363%--><a data-link-type=\"idl\" data-xref-type=\"attribute|dict-member|const\" data-link-for=\"Event\" data-xref-for=\"Event\" data-cite=\"dom\" data-cite-path=\"/\" data-cite-frag=\"dom-event-istrusted\" data-type=\"attribute\" href=\"https://dom.spec.whatwg.org/#dom-event-istrusted\"><code>isTrusted<!---0.509363%--></code></a><!---0.509363%--> to match the respective properties of the \"parent\" pointer event."
        },
        {
          "html": "Set the event's <!---0.509363%--><a data-link-type=\"idl\" data-xref-type=\"attribute|dict-member|const\" data-link-for=\"Event\" data-xref-for=\"Event\" data-cite=\"dom\" data-cite-path=\"/\" data-cite-frag=\"dom-event-cancelable\" data-type=\"attribute\" href=\"https://dom.spec.whatwg.org/#dom-event-cancelable\"><code>cancelable<!---0.509363%--></code></a><!---0.509363%--> and <!---0.509363%--><a data-link-type=\"idl\" data-xref-type=\"attribute|dict-member|const\" data-link-for=\"Event\" data-xref-for=\"Event\" data-cite=\"dom\" data-cite-path=\"/\" data-cite-frag=\"dom-event-bubbles\" data-type=\"attribute\" href=\"https://dom.spec.whatwg.org/#dom-event-bubbles\"><code>bubbles<!---0.509363%--></code></a><!---0.509363%--> to false (as these events will never\n                be dispatched in isolation)."
        },
        {
          "html": "Set the event's <a href=\"https://w3c.github.io/pointerevents/#dfn-coalesced-events-list\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-coalesced-events-list-7\">coalesced events list</a> and <a href=\"https://w3c.github.io/pointerevents/#dfn-predicted-events-list\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-predicted-events-list-7\">predicted events list</a> to an empty list."
        },
        {
          "html": "Initialize all other attributes to default <a data-xref-type=\"_IDL_\" data-link-type=\"idl\" data-lt=\"PointerEvent\" href=\"https://w3c.github.io/pointerevents/#dom-pointerevent\" class=\"internalDFN\" id=\"ref-for-dom-pointerevent-16\"><code>PointerEvent<!---0.509363%--></code></a><!---0.509363%--> values."
        }
      ]
    },
    {
      "html": "When a trusted <a href=\"https://w3c.github.io/pointerevents/#dom-pointerevent\" class=\"internalDFN\" data-link-type=\"idl\" id=\"ref-for-dom-pointerevent-17\"><code>PointerEvent</code></a>'s <!---0.509363%--><a data-link-type=\"idl\" data-xref-type=\"attribute|dict-member|const\" data-link-for=\"Event\" data-xref-for=\"Event\" data-cite=\"dom\" data-cite-path=\"/\" data-cite-frag=\"dom-event-target\" data-type=\"attribute\" href=\"https://dom.spec.whatwg.org/#dom-event-target\"><code>target<!---0.509363%--></code></a><!---0.509363%--> is changed, user agents <em class=\"rfc2119\">SHOULD<!---0.509363%--></em>, for each event in the\n                <a href=\"https://w3c.github.io/pointerevents/#dfn-coalesced-events-list\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-coalesced-events-list-8\">coalesced events list</a> and <a href=\"https://w3c.github.io/pointerevents/#dfn-predicted-events-list\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-predicted-events-list-8\">predicted events list</a>:",
      "rationale": "set",
      "steps": [
        {
          "html": "Set the event's <!---0.509363%--><a data-link-type=\"idl\" data-xref-type=\"attribute|dict-member|const\" data-link-for=\"Event\" data-xref-for=\"Event\" data-cite=\"dom\" data-cite-path=\"/\" data-cite-frag=\"dom-event-target\" data-type=\"attribute\" href=\"https://dom.spec.whatwg.org/#dom-event-target\"><code>target<!---0.509363%--></code></a><!---0.509363%--> to match the <!---0.509363%--><a data-link-type=\"idl\" data-xref-type=\"attribute|dict-member|const\" data-link-for=\"Event\" data-xref-for=\"Event\" data-cite=\"dom\" data-cite-path=\"/\" data-cite-frag=\"dom-event-target\" data-type=\"attribute\" href=\"https://dom.spec.whatwg.org/#dom-event-target\"><code>target<!---0.509363%--></code></a><!---0.509363%--> of the \"parent\" pointer event."
        }
      ]
    },
    {
      "html": "Right before firing a <!---0.509363%--><a data-link-type=\"idl\" data-xref-type=\"attribute|dict-member|const\" data-link-for=\"GlobalEventHandlers\" data-xref-for=\"GlobalEventHandlers\" href=\"https://w3c.github.io/pointerevents/#dfn-pointerdown\" class=\"internalDFN\" id=\"ref-for-dfn-pointerdown-31\"><code>pointerdown<!---0.509363%--></code></a><!---0.509363%-->, <!---0.509363%--><a data-link-type=\"idl\" data-xref-type=\"attribute|dict-member|const\" data-link-for=\"GlobalEventHandlers\" data-xref-for=\"GlobalEventHandlers\" href=\"https://w3c.github.io/pointerevents/#dfn-pointerup\" class=\"internalDFN\" id=\"ref-for-dfn-pointerup-28\"><code>pointerup<!---0.509363%--></code></a><!---0.509363%--> or <!---0.509363%--><a data-link-type=\"idl\" data-xref-type=\"attribute|dict-member|const\" data-link-for=\"GlobalEventHandlers\" data-xref-for=\"GlobalEventHandlers\" href=\"https://w3c.github.io/pointerevents/#dfn-pointermove\" class=\"internalDFN\" id=\"ref-for-dfn-pointermove-31\"><code>pointermove<!---0.509363%--></code></a><!---0.509363%--> event, or a <!---0.509363%--><a data-link-type=\"idl\" data-xref-type=\"attribute|dict-member|const\" data-link-for=\"GlobalEventHandlers\" data-xref-for=\"GlobalEventHandlers\" href=\"https://w3c.github.io/pointerevents/#dfn-pointerleave\" class=\"internalDFN\" id=\"ref-for-dfn-pointerleave-9\"><code>pointerleave<!---0.509363%--></code></a><!---0.509363%--> event at the <code>window</code>, the user agent <em class=\"rfc2119\">SHOULD<!---0.509363%--></em> run the following steps:",
      "rationale": "let",
      "steps": [
        {
          "html": "Let <var>T<!---0.509363%--></var> be the target of the <!---0.509363%--><a data-link-type=\"idl\" data-xref-type=\"attribute|dict-member|const\" data-link-for=\"GlobalEventHandlers\" data-xref-for=\"GlobalEventHandlers\" href=\"https://w3c.github.io/pointerevents/#dfn-pointerdown\" class=\"internalDFN\" id=\"ref-for-dfn-pointerdown-32\"><code>pointerdown<!---0.509363%--></code></a><!---0.509363%-->, <!---0.509363%--><a data-link-type=\"idl\" data-xref-type=\"attribute|dict-member|const\" data-link-for=\"GlobalEventHandlers\" data-xref-for=\"GlobalEventHandlers\" href=\"https://w3c.github.io/pointerevents/#dfn-pointerup\" class=\"internalDFN\" id=\"ref-for-dfn-pointerup-29\"><code>pointerup<!---0.509363%--></code></a><!---0.509363%--> or <!---0.509363%--><a data-link-type=\"idl\" data-xref-type=\"attribute|dict-member|const\" data-link-for=\"GlobalEventHandlers\" data-xref-for=\"GlobalEventHandlers\" href=\"https://w3c.github.io/pointerevents/#dfn-pointermove\" class=\"internalDFN\" id=\"ref-for-dfn-pointermove-32\"><code>pointermove<!---0.509363%--></code></a><!---0.509363%--> event being dispatched. For the <!---0.509363%--><a data-link-type=\"idl\" data-xref-type=\"attribute|dict-member|const\" data-link-for=\"GlobalEventHandlers\" data-xref-for=\"GlobalEventHandlers\" href=\"https://w3c.github.io/pointerevents/#dfn-pointerleave\" class=\"internalDFN\" id=\"ref-for-dfn-pointerleave-10\"><code>pointerleave<!---0.509363%--></code></a><!---0.509363%--> event, unset <var>T<!---0.509363%--></var>."
        },
        {
          "html": "If <var>T<!---0.509363%--></var> and current <a data-lt=\"effective position of the legacy mouse pointer\" href=\"https://w3c.github.io/pointerevents/#dfn-effective-position-of-the-legacy-mouse-pointer\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-effective-position-of-the-legacy-mouse-pointer-1\">effective legacy mouse pointer position</a> are both unset or they are equal, terminate these steps."
        },
        {
          "html": "Dispatch <code>mouseover</code>, <code>mouseout</code>, <code>mouseenter</code> and <code>mouseleave</code> events as per [<cite><a class=\"bibref\" data-link-type=\"biblio\" href=\"https://w3c.github.io/pointerevents/#bib-uievents\" title=\"UI Events\">UIEVENTS<!---0.509363%--></a></cite><!---0.509363%-->] for a mouse moving from the current <a data-lt=\"effective position of the legacy mouse pointer\" href=\"https://w3c.github.io/pointerevents/#dfn-effective-position-of-the-legacy-mouse-pointer\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-effective-position-of-the-legacy-mouse-pointer-2\">effective legacy mouse pointer position</a> to <var>T<!---0.509363%--></var>. Consider an unset value of either current <a data-lt=\"effective position of the legacy mouse pointer\" href=\"https://w3c.github.io/pointerevents/#dfn-effective-position-of-the-legacy-mouse-pointer\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-effective-position-of-the-legacy-mouse-pointer-3\">effective legacy mouse pointer position</a> or <var>T<!---0.509363%--></var> as an out-of-window mouse position."
        },
        {
          "html": "Set <a data-lt=\"effective position of the legacy mouse pointer\" href=\"https://w3c.github.io/pointerevents/#dfn-effective-position-of-the-legacy-mouse-pointer\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-effective-position-of-the-legacy-mouse-pointer-4\">effective legacy mouse pointer position</a> to <var>T<!---0.509363%--></var>."
        }
      ]
    },
    {
      "html": "Whenever the user agent is to dispatch a pointer event for a device that supports hover, it <em class=\"rfc2119\">SHOULD<!---0.509363%--></em> run the following steps:",
      "rationale": "if",
      "steps": [
        {
          "html": "If the <code>isPrimary</code> property for the pointer event to be dispatched is <code>false</code> then dispatch the pointer event and terminate these steps."
        },
        {
          "html": "If the pointer event to be dispatched is a <!---0.509363%--><a data-link-type=\"idl\" data-xref-type=\"attribute|dict-member|const\" data-link-for=\"GlobalEventHandlers\" data-xref-for=\"GlobalEventHandlers\" href=\"https://w3c.github.io/pointerevents/#dfn-pointerdown\" class=\"internalDFN\" id=\"ref-for-dfn-pointerdown-33\"><code>pointerdown<!---0.509363%--></code></a><!---0.509363%-->, <!---0.509363%--><a data-link-type=\"idl\" data-xref-type=\"attribute|dict-member|const\" data-link-for=\"GlobalEventHandlers\" data-xref-for=\"GlobalEventHandlers\" href=\"https://w3c.github.io/pointerevents/#dfn-pointerup\" class=\"internalDFN\" id=\"ref-for-dfn-pointerup-30\"><code>pointerup<!---0.509363%--></code></a><!---0.509363%--> or <!---0.509363%--><a data-link-type=\"idl\" data-xref-type=\"attribute|dict-member|const\" data-link-for=\"GlobalEventHandlers\" data-xref-for=\"GlobalEventHandlers\" href=\"https://w3c.github.io/pointerevents/#dfn-pointermove\" class=\"internalDFN\" id=\"ref-for-dfn-pointermove-33\"><code>pointermove<!---0.509363%--></code></a><!---0.509363%--> event, or a <!---0.509363%--><a data-link-type=\"idl\" data-xref-type=\"attribute|dict-member|const\" data-link-for=\"GlobalEventHandlers\" data-xref-for=\"GlobalEventHandlers\" href=\"https://w3c.github.io/pointerevents/#dfn-pointerleave\" class=\"internalDFN\" id=\"ref-for-dfn-pointerleave-11\"><code>pointerleave<!---0.509363%--></code></a><!---0.509363%--> event at the <code>window</code>, dispatch compatibility mouse transition events as described in <a href=\"https://w3c.github.io/pointerevents/#dfn-tracking-the-effective-position-of-the-legacy-mouse-pointer\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-tracking-the-effective-position-of-the-legacy-mouse-pointer-1\">Tracking the effective position of the legacy mouse pointer</a>."
        },
        {
          "html": "Dispatch the pointer event."
        },
        {
          "html": "If the pointer event dispatched was <!---0.509363%--><a data-link-type=\"idl\" data-xref-type=\"attribute|dict-member|const\" data-link-for=\"GlobalEventHandlers\" data-xref-for=\"GlobalEventHandlers\" href=\"https://w3c.github.io/pointerevents/#dfn-pointerdown\" class=\"internalDFN\" id=\"ref-for-dfn-pointerdown-34\"><code>pointerdown<!---0.509363%--></code></a><!---0.509363%--> and the event was <a data-lt=\"canceled event\" href=\"https://w3c.github.io/pointerevents/#dfn-canceled-event\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-canceled-event-1\">canceled</a>, then set the <code>PREVENT MOUSE EVENT</code> flag for this <code>pointerType</code>."
        },
        {
          "html": "If the <code>PREVENT MOUSE EVENT</code> flag is <strong>not</strong> set for this <code>pointerType</code> and the pointer event dispatched was:\n                    <ul>\n                        <li><!---0.509363%--><a data-link-type=\"idl\" data-xref-type=\"attribute|dict-member|const\" data-link-for=\"GlobalEventHandlers\" data-xref-for=\"GlobalEventHandlers\" href=\"https://w3c.github.io/pointerevents/#dfn-pointerdown\" class=\"internalDFN\" id=\"ref-for-dfn-pointerdown-35\"><code>pointerdown<!---0.509363%--></code></a><!---0.509363%-->, then fire a <code>mousedown</code> event.</li>\n                        <li><!---0.509363%--><a data-link-type=\"idl\" data-xref-type=\"attribute|dict-member|const\" data-link-for=\"GlobalEventHandlers\" data-xref-for=\"GlobalEventHandlers\" href=\"https://w3c.github.io/pointerevents/#dfn-pointermove\" class=\"internalDFN\" id=\"ref-for-dfn-pointermove-34\"><code>pointermove<!---0.509363%--></code></a><!---0.509363%-->, then fire a <code>mousemove</code> event.</li>\n                        <li><!---0.509363%--><a data-link-type=\"idl\" data-xref-type=\"attribute|dict-member|const\" data-link-for=\"GlobalEventHandlers\" data-xref-for=\"GlobalEventHandlers\" href=\"https://w3c.github.io/pointerevents/#dfn-pointerup\" class=\"internalDFN\" id=\"ref-for-dfn-pointerup-31\"><code>pointerup<!---0.509363%--></code></a><!---0.509363%-->, then fire a <code>mouseup</code> event.</li>\n                        <li><!---0.509363%--><a data-link-type=\"idl\" data-xref-type=\"attribute|dict-member|const\" data-link-for=\"GlobalEventHandlers\" data-xref-for=\"GlobalEventHandlers\" href=\"https://w3c.github.io/pointerevents/#dfn-pointercancel\" class=\"internalDFN\" id=\"ref-for-dfn-pointercancel-11\"><code>pointercancel<!---0.509363%--></code></a><!---0.509363%-->, then fire a <code>mouseup</code> event at the <code>window</code>.</li>\n                    </ul>"
        },
        {
          "html": "If the pointer event dispatched was <!---0.509363%--><a data-link-type=\"idl\" data-xref-type=\"attribute|dict-member|const\" data-link-for=\"GlobalEventHandlers\" data-xref-for=\"GlobalEventHandlers\" href=\"https://w3c.github.io/pointerevents/#dfn-pointerup\" class=\"internalDFN\" id=\"ref-for-dfn-pointerup-32\"><code>pointerup<!---0.509363%--></code></a><!---0.509363%--> or <!---0.509363%--><a data-link-type=\"idl\" data-xref-type=\"attribute|dict-member|const\" data-link-for=\"GlobalEventHandlers\" data-xref-for=\"GlobalEventHandlers\" href=\"https://w3c.github.io/pointerevents/#dfn-pointercancel\" class=\"internalDFN\" id=\"ref-for-dfn-pointercancel-12\"><code>pointercancel<!---0.509363%--></code></a><!---0.509363%-->, clear the <code>PREVENT MOUSE EVENT</code> flag for this <code>pointerType</code>."
        }
      ]
    },
    {
      "html": "This requires that user agents provide a different mapping for these types of input devices. Whenever the user agent is to dispatch a pointer event for a device that <a href=\"https://w3c.github.io/pointerevents/#mapping-for-devices-that-do-not-support-hover\">does not support hover</a>, it <em class=\"rfc2119\">SHOULD<!---0.509363%--></em> run the following steps:",
      "rationale": "if",
      "steps": [
        {
          "html": "If the <code>isPrimary</code> property for the pointer event to be dispatched is <code>false</code> then dispatch the pointer event and terminate these steps."
        },
        {
          "html": "If the pointer event to be dispatched is <!---0.509363%--><a data-link-type=\"idl\" data-xref-type=\"attribute|dict-member|const\" data-link-for=\"GlobalEventHandlers\" data-xref-for=\"GlobalEventHandlers\" href=\"https://w3c.github.io/pointerevents/#dfn-pointerover\" class=\"internalDFN\" id=\"ref-for-dfn-pointerover-9\"><code>pointerover<!---0.509363%--></code></a><!---0.509363%--> and the <!---0.509363%--><a data-link-type=\"idl\" data-xref-type=\"attribute|dict-member|const\" data-link-for=\"GlobalEventHandlers\" data-xref-for=\"GlobalEventHandlers\" href=\"https://w3c.github.io/pointerevents/#dfn-pointerdown\" class=\"internalDFN\" id=\"ref-for-dfn-pointerdown-36\"><code>pointerdown<!---0.509363%--></code></a><!---0.509363%--> event has not yet been dispatched for this pointer, then fire a <code>mousemove</code> event (for compatibility with legacy mouse-specific code)."
        },
        {
          "html": "If the pointer event to be dispatched is a <!---0.509363%--><a data-link-type=\"idl\" data-xref-type=\"attribute|dict-member|const\" data-link-for=\"GlobalEventHandlers\" data-xref-for=\"GlobalEventHandlers\" href=\"https://w3c.github.io/pointerevents/#dfn-pointerdown\" class=\"internalDFN\" id=\"ref-for-dfn-pointerdown-37\"><code>pointerdown<!---0.509363%--></code></a><!---0.509363%-->, <!---0.509363%--><a data-link-type=\"idl\" data-xref-type=\"attribute|dict-member|const\" data-link-for=\"GlobalEventHandlers\" data-xref-for=\"GlobalEventHandlers\" href=\"https://w3c.github.io/pointerevents/#dfn-pointerup\" class=\"internalDFN\" id=\"ref-for-dfn-pointerup-33\"><code>pointerup<!---0.509363%--></code></a><!---0.509363%--> or <!---0.509363%--><a data-link-type=\"idl\" data-xref-type=\"attribute|dict-member|const\" data-link-for=\"GlobalEventHandlers\" data-xref-for=\"GlobalEventHandlers\" href=\"https://w3c.github.io/pointerevents/#dfn-pointermove\" class=\"internalDFN\" id=\"ref-for-dfn-pointermove-35\"><code>pointermove<!---0.509363%--></code></a><!---0.509363%--> event, or a <!---0.509363%--><a data-link-type=\"idl\" data-xref-type=\"attribute|dict-member|const\" data-link-for=\"GlobalEventHandlers\" data-xref-for=\"GlobalEventHandlers\" href=\"https://w3c.github.io/pointerevents/#dfn-pointerleave\" class=\"internalDFN\" id=\"ref-for-dfn-pointerleave-12\"><code>pointerleave<!---0.509363%--></code></a><!---0.509363%--> event at the <code>window</code>, dispatch compatibility mouse transition events as described in <a href=\"https://w3c.github.io/pointerevents/#dfn-tracking-the-effective-position-of-the-legacy-mouse-pointer\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-tracking-the-effective-position-of-the-legacy-mouse-pointer-2\">Tracking the effective position of the legacy mouse pointer</a>."
        },
        {
          "html": "Dispatch the pointer event."
        },
        {
          "html": "If the pointer event dispatched was <!---0.509363%--><a data-link-type=\"idl\" data-xref-type=\"attribute|dict-member|const\" data-link-for=\"GlobalEventHandlers\" data-xref-for=\"GlobalEventHandlers\" href=\"https://w3c.github.io/pointerevents/#dfn-pointerdown\" class=\"internalDFN\" id=\"ref-for-dfn-pointerdown-38\"><code>pointerdown<!---0.509363%--></code></a><!---0.509363%--> and the event was <a data-lt=\"canceled event\" href=\"https://w3c.github.io/pointerevents/#dfn-canceled-event\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-canceled-event-2\">canceled</a>, then set the <code>PREVENT MOUSE EVENT</code> flag for this <code>pointerType</code>."
        },
        {
          "html": "If the <code>PREVENT MOUSE EVENT</code> flag is <strong>not</strong> set for this <code>pointerType</code> and the pointer event dispatched was:\n                    <ul>\n                        <li><!---0.509363%--><a data-link-type=\"idl\" data-xref-type=\"attribute|dict-member|const\" data-link-for=\"GlobalEventHandlers\" data-xref-for=\"GlobalEventHandlers\" href=\"https://w3c.github.io/pointerevents/#dfn-pointerdown\" class=\"internalDFN\" id=\"ref-for-dfn-pointerdown-39\"><code>pointerdown<!---0.509363%--></code></a><!---0.509363%-->, then fire a <code>mousedown</code> event.</li>\n                        <li><!---0.509363%--><a data-link-type=\"idl\" data-xref-type=\"attribute|dict-member|const\" data-link-for=\"GlobalEventHandlers\" data-xref-for=\"GlobalEventHandlers\" href=\"https://w3c.github.io/pointerevents/#dfn-pointermove\" class=\"internalDFN\" id=\"ref-for-dfn-pointermove-36\"><code>pointermove<!---0.509363%--></code></a><!---0.509363%-->, then fire a <code>mousemove</code> event.</li>\n                        <li><!---0.509363%--><a data-link-type=\"idl\" data-xref-type=\"attribute|dict-member|const\" data-link-for=\"GlobalEventHandlers\" data-xref-for=\"GlobalEventHandlers\" href=\"https://w3c.github.io/pointerevents/#dfn-pointerup\" class=\"internalDFN\" id=\"ref-for-dfn-pointerup-34\"><code>pointerup<!---0.509363%--></code></a><!---0.509363%-->, then fire a <code>mouseup</code> event.</li>\n                        <li><!---0.509363%--><a data-link-type=\"idl\" data-xref-type=\"attribute|dict-member|const\" data-link-for=\"GlobalEventHandlers\" data-xref-for=\"GlobalEventHandlers\" href=\"https://w3c.github.io/pointerevents/#dfn-pointercancel\" class=\"internalDFN\" id=\"ref-for-dfn-pointercancel-13\"><code>pointercancel<!---0.509363%--></code></a><!---0.509363%-->, then fire a <code>mouseup</code> event at the <code>window</code>.</li>\n                    </ul>"
        },
        {
          "html": "If the pointer event dispatched was <!---0.509363%--><a data-link-type=\"idl\" data-xref-type=\"attribute|dict-member|const\" data-link-for=\"GlobalEventHandlers\" data-xref-for=\"GlobalEventHandlers\" href=\"https://w3c.github.io/pointerevents/#dfn-pointerup\" class=\"internalDFN\" id=\"ref-for-dfn-pointerup-35\"><code>pointerup<!---0.509363%--></code></a><!---0.509363%--> or <!---0.509363%--><a data-link-type=\"idl\" data-xref-type=\"attribute|dict-member|const\" data-link-for=\"GlobalEventHandlers\" data-xref-for=\"GlobalEventHandlers\" href=\"https://w3c.github.io/pointerevents/#dfn-pointercancel\" class=\"internalDFN\" id=\"ref-for-dfn-pointercancel-14\"><code>pointercancel<!---0.509363%--></code></a><!---0.509363%-->, clear the <code>PREVENT MOUSE EVENT</code> flag for this <code>pointerType</code>."
        }
      ]
    }
  ]
}