{
  "spec": {
    "title": "Web Share API",
    "url": "https://w3c.github.io/web-share/"
  },
  "algorithms": [
    {
      "html": "As with any user of <a data-xref-type=\"_IDL_\" data-link-type=\"idl\" data-lt=\"DOMException\" data-cite=\"webidl\" data-cite-path=\"/\" data-cite-frag=\"idl-DOMException\" data-type=\"interface\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\"><code>DOMException<!---0.104638%--></code></a><!---0.104638%-->, implementors need to\n            carefully consider what information is revealed in the error\n            message when <!---0.104638%--><a data-link-type=\"idl\" data-xref-type=\"method\" data-link-for=\"Navigator\" data-xref-for=\"Navigator\" data-lt=\"share()\" href=\"https://w3c.github.io/web-share/#dom-navigator-share\" class=\"internalDFN\" id=\"ref-for-dom-navigator-share-7\"><code>share<!---0.104638%--></code></a><code>(<!---0.104638%--><!---0.104638%--><!---0.104638%-->)</code><!---0.104638%--><!---0.104638%--> is rejected. Even distinguishing\n            between the case where no <a data-link-type=\"dfn|abstract-op\" href=\"https://w3c.github.io/web-share/#dfn-share-target\" class=\"internalDFN\" id=\"ref-for-dfn-share-target-5\">share targets<!---0.104638%--></a> are available and user\n            cancellation could reveal information about which share targets are\n            installed on the user's device.",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "Let <var data-type=\"Window\">global<!---0.104638%--></var> be <a data-link-type=\"dfn|abstract-op\" data-cite=\"webidl\" data-cite-path=\"/\" data-cite-frag=\"this\" data-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\">this<!---0.104638%--></a>'s <a data-link-type=\"dfn|abstract-op\" data-cite=\"html\" data-cite-path=\"/webappapis.html\" data-cite-frag=\"concept-relevant-global\" data-type=\"dfn\" href=\"https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global\">relevant global object<!---0.104638%--></a>."
        },
        {
          "html": "Let <var data-type=\"Document\">document<!---0.104638%--></var> be <var data-type=\"Window\">global<!---0.104638%--></var>'s <a data-link-type=\"dfn|abstract-op\" data-cite=\"html\" data-cite-path=\"/nav-history-apis.html\" data-cite-frag=\"concept-document-window\" data-type=\"dfn\" href=\"https://html.spec.whatwg.org/multipage/nav-history-apis.html#concept-document-window\">associated <code>Document<!---0.104638%--></code><!---0.104638%--></a>."
        },
        {
          "html": "If <var data-type=\"Document\">document<!---0.104638%--></var> is not <a data-link-type=\"dfn|abstract-op\" data-link-for=\"Document\" data-xref-for=\"Document\" data-cite=\"html\" data-cite-path=\"/document-sequences.html\" data-cite-frag=\"fully-active\" data-type=\"dfn\" href=\"https://html.spec.whatwg.org/multipage/document-sequences.html#fully-active\">fully active<!---0.104638%--></a>, return <a data-link-type=\"dfn|abstract-op\" data-cite=\"webidl\" data-cite-path=\"/\" data-cite-frag=\"a-promise-rejected-with\" data-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#a-promise-rejected-with\">a promise rejected with<!---0.104638%--></a> an \"<a data-link-type=\"idl\" data-cite=\"webidl\" data-xref-type=\"exception\" data-cite-path=\"/\" data-cite-frag=\"invalidstateerror\" data-type=\"exception\" href=\"https://webidl.spec.whatwg.org/#invalidstateerror\"><code>InvalidStateError<!---0.104638%--></code></a>\"<!---0.104638%-->\n            <a data-xref-type=\"_IDL_\" data-link-type=\"idl\" data-lt=\"DOMException\" data-cite=\"webidl\" data-cite-path=\"/\" data-cite-frag=\"idl-DOMException\" data-type=\"interface\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\"><code>DOMException<!---0.104638%--></code></a><!---0.104638%-->."
        },
        {
          "html": "If <var data-type=\"Document\">document<!---0.104638%--></var> is not <a data-cite=\"html\" data-cite-path=\"/iframe-embed-object.html\" data-cite-frag=\"allowed-to-use\" data-type=\"dfn\" href=\"https://html.spec.whatwg.org/multipage/iframe-embed-object.html#allowed-to-use\">allowed to use</a> <a href=\"https://w3c.github.io/web-share/#dfn-web-share\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-web-share-1\"><code>\"web-share\"</code></a>,\n            return <a data-link-type=\"dfn|abstract-op\" data-cite=\"webidl\" data-cite-path=\"/\" data-cite-frag=\"a-promise-rejected-with\" data-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#a-promise-rejected-with\">a promise rejected with<!---0.104638%--></a> a \"<a data-link-type=\"idl\" data-cite=\"webidl\" data-xref-type=\"exception\" data-cite-path=\"/\" data-cite-frag=\"notallowederror\" data-type=\"exception\" href=\"https://webidl.spec.whatwg.org/#notallowederror\"><code>NotAllowedError<!---0.104638%--></code></a>\"<!---0.104638%-->\n            <a data-xref-type=\"_IDL_\" data-link-type=\"idl\" data-lt=\"DOMException\" data-cite=\"webidl\" data-cite-path=\"/\" data-cite-frag=\"idl-DOMException\" data-type=\"interface\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\"><code>DOMException<!---0.104638%--></code></a><!---0.104638%-->."
        },
        {
          "html": "If <a data-link-type=\"dfn|abstract-op\" data-cite=\"webidl\" data-cite-path=\"/\" data-cite-frag=\"this\" data-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\">this<!---0.104638%--></a>.<!---0.104638%--><a data-xref-type=\"attribute\" data-link-type=\"attribute\" data-link-for=\"Navigator\" data-xref-for=\"Navigator\" data-lt=\"[[sharePromise]]\" href=\"https://w3c.github.io/web-share/#dfn-sharepromise\" class=\"internalDFN\" id=\"ref-for-dfn-sharepromise-2\"><code>[[sharePromise<!---0.104638%-->]]<!---0.104638%--></code></a><!---0.104638%--> is not <code>null<!---0.104638%--></code>,\n            return <a data-link-type=\"dfn|abstract-op\" data-cite=\"webidl\" data-cite-path=\"/\" data-cite-frag=\"a-promise-rejected-with\" data-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#a-promise-rejected-with\">a promise rejected with<!---0.104638%--></a> an \"<a data-link-type=\"idl\" data-cite=\"webidl\" data-xref-type=\"exception\" data-cite-path=\"/\" data-cite-frag=\"invalidstateerror\" data-type=\"exception\" href=\"https://webidl.spec.whatwg.org/#invalidstateerror\"><code>InvalidStateError<!---0.104638%--></code></a>\"<!---0.104638%-->\n            <a data-xref-type=\"_IDL_\" data-link-type=\"idl\" data-lt=\"DOMException\" data-cite=\"webidl\" data-cite-path=\"/\" data-cite-frag=\"idl-DOMException\" data-type=\"interface\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\"><code>DOMException<!---0.104638%--></code></a><!---0.104638%-->."
        },
        {
          "html": "If <var data-type=\"Window\">global<!---0.104638%--></var> does not have <a data-link-type=\"dfn|abstract-op\" data-cite=\"html\" data-cite-path=\"/interaction.html\" data-cite-frag=\"transient-activation\" data-type=\"dfn\" href=\"https://html.spec.whatwg.org/multipage/interaction.html#transient-activation\">transient activation<!---0.104638%--></a>, return <a data-link-type=\"dfn|abstract-op\" data-cite=\"webidl\" data-cite-path=\"/\" data-cite-frag=\"a-promise-rejected-with\" data-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#a-promise-rejected-with\">a promise rejected with<!---0.104638%--></a> a \"<a data-link-type=\"idl\" data-cite=\"webidl\" data-xref-type=\"exception\" data-cite-path=\"/\" data-cite-frag=\"notallowederror\" data-type=\"exception\" href=\"https://webidl.spec.whatwg.org/#notallowederror\"><code>NotAllowedError<!---0.104638%--></code></a>\"<!---0.104638%--> <a data-xref-type=\"_IDL_\" data-link-type=\"idl\" data-lt=\"DOMException\" data-cite=\"webidl\" data-cite-path=\"/\" data-cite-frag=\"idl-DOMException\" data-type=\"interface\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\"><code>DOMException<!---0.104638%--></code></a><!---0.104638%-->."
        },
        {
          "html": "<a data-link-type=\"dfn|abstract-op\" data-cite=\"html\" data-cite-path=\"/interaction.html\" data-cite-frag=\"consume-user-activation\" data-type=\"dfn\" href=\"https://html.spec.whatwg.org/multipage/interaction.html#consume-user-activation\">Consume user activation<!---0.104638%--></a> of <var data-type=\"Window\">global<!---0.104638%--></var>."
        },
        {
          "html": "Let <var data-type=\"URL\">base<!---0.104638%--></var> be <a data-link-type=\"dfn|abstract-op\" data-cite=\"webidl\" data-cite-path=\"/\" data-cite-frag=\"this\" data-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\">this<!---0.104638%--></a>'s <a data-cite=\"html\" data-cite-path=\"/webappapis.html\" data-cite-frag=\"relevant-settings-object\" data-type=\"dfn\" href=\"https://html.spec.whatwg.org/multipage/webappapis.html#relevant-settings-object\">relevant settings object</a>'s\n            <a data-link-type=\"dfn|abstract-op\" data-link-for=\"environment settings object\" data-xref-for=\"environment settings object\" data-cite=\"html\" data-cite-path=\"/webappapis.html\" data-cite-frag=\"api-base-url\" data-type=\"dfn\" href=\"https://html.spec.whatwg.org/multipage/webappapis.html#api-base-url\">API base URL<!---0.104638%--></a>."
        },
        {
          "html": "If <a data-link-type=\"dfn|abstract-op\" href=\"https://w3c.github.io/web-share/#dfn-validate-share-data\" class=\"internalDFN\" id=\"ref-for-dfn-validate-share-data-2\">validate share data<!---0.104638%--></a> with <var data-type=\"ShareData\">data<!---0.104638%--></var> and <var data-type=\"URL\">base<!---0.104638%--></var> returns\n            false, then return <a data-link-type=\"dfn|abstract-op\" data-cite=\"webidl\" data-cite-path=\"/\" data-cite-frag=\"a-promise-rejected-with\" data-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#a-promise-rejected-with\">a promise rejected with<!---0.104638%--></a> a <a data-xref-type=\"_IDL_\" data-link-type=\"idl\" data-lt=\"TypeError\" data-cite=\"webidl\" data-cite-path=\"/\" data-cite-frag=\"exceptiondef-typeerror\" data-type=\"exception\" href=\"https://webidl.spec.whatwg.org/#exceptiondef-typeerror\"><code>TypeError<!---0.104638%--></code></a><!---0.104638%-->."
        },
        {
          "html": "If <var data-type=\"ShareData\">data<!---0.104638%--></var>'s <!---0.104638%--><a data-link-type=\"idl\" data-xref-type=\"attribute|dict-member|const\" data-link-for=\"ShareData\" data-xref-for=\"ShareData\" href=\"https://w3c.github.io/web-share/#dom-sharedata-url\" class=\"internalDFN\" id=\"ref-for-dom-sharedata-url-2\"><code>url<!---0.104638%--></code></a><!---0.104638%--> member is present:",
          "rationale": "let",
          "steps": [
            {
              "html": "Let <var data-type=\"URL\">url<!---0.104638%--></var> be the result of running the <a data-cite=\"url\" data-cite-path=\"/\" data-cite-frag=\"concept-url-parser\" data-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-parser\">URL\n                parser</a> on <var data-type=\"ShareData\">data<!---0.104638%--></var>'s <!---0.104638%--><a data-link-type=\"idl\" data-xref-type=\"attribute|dict-member|const\" data-link-for=\"ShareData\" data-xref-for=\"ShareData\" href=\"https://w3c.github.io/web-share/#dom-sharedata-url\" class=\"internalDFN\" id=\"ref-for-dom-sharedata-url-3\"><code>url<!---0.104638%--></code></a><!---0.104638%--> with <var data-type=\"URL\">base<!---0.104638%--></var>."
            },
            {
              "html": "<a href=\"https://infra.spec.whatwg.org/#assert\">Assert</a>: <var data-type=\"URL\">url<!---0.104638%--></var> is <a data-xref-type=\"_IDL_\" data-link-type=\"idl\" data-lt=\"URL\" data-cite=\"url\" data-cite-path=\"/\" data-cite-frag=\"url\" data-type=\"interface\" href=\"https://url.spec.whatwg.org/#url\"><code>URL<!---0.104638%--></code></a><!---0.104638%-->."
            },
            {
              "html": "Set <var data-type=\"ShareData\">data<!---0.104638%--></var> to a copy of <var data-type=\"ShareData\">data<!---0.104638%--></var>, with its <!---0.104638%--><a data-link-type=\"idl\" data-xref-type=\"attribute|dict-member|const\" data-link-for=\"ShareData\" data-xref-for=\"ShareData\" href=\"https://w3c.github.io/web-share/#dom-sharedata-url\" class=\"internalDFN\" id=\"ref-for-dom-sharedata-url-4\"><code>url<!---0.104638%--></code></a><!---0.104638%-->\n                member set to the result of running the <a data-cite=\"url\" data-cite-path=\"/\" data-cite-frag=\"concept-url-serializer\" data-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-serializer\">URL serializer</a>\n                on <var data-type=\"URL\">url<!---0.104638%--></var>."
            }
          ]
        },
        {
          "html": "If a file type is being blocked due to security considerations,\n            return <a data-link-type=\"dfn|abstract-op\" data-cite=\"webidl\" data-cite-path=\"/\" data-cite-frag=\"a-promise-rejected-with\" data-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#a-promise-rejected-with\">a promise rejected with<!---0.104638%--></a> a \"<a data-link-type=\"idl\" data-cite=\"webidl\" data-xref-type=\"exception\" data-cite-path=\"/\" data-cite-frag=\"notallowederror\" data-type=\"exception\" href=\"https://webidl.spec.whatwg.org/#notallowederror\"><code>NotAllowedError<!---0.104638%--></code></a>\"<!---0.104638%-->\n            <a data-xref-type=\"_IDL_\" data-link-type=\"idl\" data-lt=\"DOMException\" data-cite=\"webidl\" data-cite-path=\"/\" data-cite-frag=\"idl-DOMException\" data-type=\"interface\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\"><code>DOMException<!---0.104638%--></code></a><!---0.104638%-->."
        },
        {
          "html": "Set <a data-link-type=\"dfn|abstract-op\" data-cite=\"webidl\" data-cite-path=\"/\" data-cite-frag=\"this\" data-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\">this<!---0.104638%--></a>.<!---0.104638%--><a data-xref-type=\"attribute\" data-link-type=\"attribute\" data-link-for=\"Navigator\" data-xref-for=\"Navigator\" data-lt=\"[[sharePromise]]\" href=\"https://w3c.github.io/web-share/#dfn-sharepromise\" class=\"internalDFN\" id=\"ref-for-dfn-sharepromise-3\"><code>[[sharePromise<!---0.104638%-->]]<!---0.104638%--></code></a><!---0.104638%--> to be <a data-cite=\"webidl\" data-cite-path=\"/\" data-cite-frag=\"a-new-promise\" data-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#a-new-promise\">a new\n            promise</a>."
        },
        {
          "html": "Return <a data-link-type=\"dfn|abstract-op\" data-cite=\"webidl\" data-cite-path=\"/\" data-cite-frag=\"this\" data-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\">this<!---0.104638%--></a>.<!---0.104638%--><a data-xref-type=\"attribute\" data-link-type=\"attribute\" data-link-for=\"Navigator\" data-xref-for=\"Navigator\" data-lt=\"[[sharePromise]]\" href=\"https://w3c.github.io/web-share/#dfn-sharepromise\" class=\"internalDFN\" id=\"ref-for-dfn-sharepromise-4\"><code>[[sharePromise<!---0.104638%-->]]<!---0.104638%--></code></a><!---0.104638%--> and <a data-cite=\"html\" data-cite-path=\"/infrastructure.html\" data-cite-frag=\"in-parallel\" data-type=\"dfn\" href=\"https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel\">in\n            parallel</a>:",
          "rationale": "if",
          "steps": [
            {
              "html": "If there are no <a href=\"https://w3c.github.io/web-share/#dfn-share-target\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-share-target-6\">share targets</a> available, <a data-link-type=\"dfn|abstract-op\" data-cite=\"html\" data-cite-path=\"/webappapis.html\" data-cite-frag=\"queue-a-global-task\" data-type=\"dfn\" href=\"https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-global-task\">queue a global task<!---0.104638%--></a> on the <a data-link-type=\"dfn|abstract-op\" data-cite=\"html\" data-cite-path=\"/webappapis.html\" data-cite-frag=\"user-interaction-task-source\" data-type=\"dfn\" href=\"https://html.spec.whatwg.org/multipage/webappapis.html#user-interaction-task-source\">user interaction task source<!---0.104638%--></a> using\n                <var data-type=\"Window\">global<!---0.104638%--></var> to:",
              "rationale": "reject",
              "steps": [
                {
                  "html": "<a data-link-type=\"dfn|abstract-op\" data-cite=\"webidl\" data-cite-path=\"/\" data-cite-frag=\"reject\" data-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#reject\">Reject<!---0.104638%--></a> <a data-link-type=\"dfn|abstract-op\" data-cite=\"webidl\" data-cite-path=\"/\" data-cite-frag=\"this\" data-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\">this<!---0.104638%--></a>.<!---0.104638%--><a data-xref-type=\"attribute\" data-link-type=\"attribute\" data-link-for=\"Navigator\" data-xref-for=\"Navigator\" data-lt=\"[[sharePromise]]\" href=\"https://w3c.github.io/web-share/#dfn-sharepromise\" class=\"internalDFN\" id=\"ref-for-dfn-sharepromise-5\"><code>[[sharePromise<!---0.104638%-->]]<!---0.104638%--></code></a><!---0.104638%--> with\n                    an \"<a data-link-type=\"idl\" data-cite=\"webidl\" data-xref-type=\"exception\" data-cite-path=\"/\" data-cite-frag=\"aborterror\" data-type=\"exception\" href=\"https://webidl.spec.whatwg.org/#aborterror\"><code>AbortError<!---0.104638%--></code></a>\"<!---0.104638%--> <a data-xref-type=\"_IDL_\" data-link-type=\"idl\" data-lt=\"DOMException\" data-cite=\"webidl\" data-cite-path=\"/\" data-cite-frag=\"idl-DOMException\" data-type=\"interface\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\"><code>DOMException<!---0.104638%--></code></a><!---0.104638%-->."
                },
                {
                  "html": "Set <a data-link-type=\"dfn|abstract-op\" data-cite=\"webidl\" data-cite-path=\"/\" data-cite-frag=\"this\" data-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\">this<!---0.104638%--></a>.<!---0.104638%--><a data-xref-type=\"attribute\" data-link-type=\"attribute\" data-link-for=\"Navigator\" data-xref-for=\"Navigator\" data-lt=\"[[sharePromise]]\" href=\"https://w3c.github.io/web-share/#dfn-sharepromise\" class=\"internalDFN\" id=\"ref-for-dfn-sharepromise-6\"><code>[[sharePromise<!---0.104638%-->]]<!---0.104638%--></code></a><!---0.104638%--> to <code>null<!---0.104638%--></code>."
                },
                {
                  "html": "Terminate this algorithm."
                }
              ]
            },
            {
              "html": "Present the user with a choice of one more <a href=\"https://w3c.github.io/web-share/#dfn-share-target\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-share-target-7\">share\n                targets</a> and the ability abort the operation. This UI\n                surface serves as a security confirmation, ensuring that\n                websites cannot silently send data to native applications. The\n                user agent <em class=\"rfc2119\">SHOULD<!---0.104638%--></em> show intermediary UI through which the user\n                can verify the shared content (if the OS-level UI does not\n                provide this functionality)."
            },
            {
              "html": "Wait for the user's choice."
            },
            {
              "html": "If the user chose to abort the share operation, <a data-link-type=\"dfn|abstract-op\" data-cite=\"html\" data-cite-path=\"/webappapis.html\" data-cite-frag=\"queue-a-global-task\" data-type=\"dfn\" href=\"https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-global-task\">queue a global task<!---0.104638%--></a> on the <a data-link-type=\"dfn|abstract-op\" data-cite=\"html\" data-cite-path=\"/webappapis.html\" data-cite-frag=\"user-interaction-task-source\" data-type=\"dfn\" href=\"https://html.spec.whatwg.org/multipage/webappapis.html#user-interaction-task-source\">user interaction task source<!---0.104638%--></a> using\n                <var data-type=\"Window\">global<!---0.104638%--></var> to:",
              "rationale": "reject",
              "steps": [
                {
                  "html": "<a data-link-type=\"dfn|abstract-op\" data-cite=\"webidl\" data-cite-path=\"/\" data-cite-frag=\"reject\" data-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#reject\">Reject<!---0.104638%--></a> <a data-link-type=\"dfn|abstract-op\" data-cite=\"webidl\" data-cite-path=\"/\" data-cite-frag=\"this\" data-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\">this<!---0.104638%--></a>.<!---0.104638%--><a data-xref-type=\"attribute\" data-link-type=\"attribute\" data-link-for=\"Navigator\" data-xref-for=\"Navigator\" data-lt=\"[[sharePromise]]\" href=\"https://w3c.github.io/web-share/#dfn-sharepromise\" class=\"internalDFN\" id=\"ref-for-dfn-sharepromise-7\"><code>[[sharePromise<!---0.104638%-->]]<!---0.104638%--></code></a><!---0.104638%--> with\n                    an \"<a data-link-type=\"idl\" data-cite=\"webidl\" data-xref-type=\"exception\" data-cite-path=\"/\" data-cite-frag=\"aborterror\" data-type=\"exception\" href=\"https://webidl.spec.whatwg.org/#aborterror\"><code>AbortError<!---0.104638%--></code></a>\"<!---0.104638%--> <a data-xref-type=\"_IDL_\" data-link-type=\"idl\" data-lt=\"DOMException\" data-cite=\"webidl\" data-cite-path=\"/\" data-cite-frag=\"idl-DOMException\" data-type=\"interface\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\"><code>DOMException<!---0.104638%--></code></a><!---0.104638%-->,"
                },
                {
                  "html": "Set <a data-link-type=\"dfn|abstract-op\" data-cite=\"webidl\" data-cite-path=\"/\" data-cite-frag=\"this\" data-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\">this<!---0.104638%--></a>.<!---0.104638%--><a data-xref-type=\"attribute\" data-link-type=\"attribute\" data-link-for=\"Navigator\" data-xref-for=\"Navigator\" data-lt=\"[[sharePromise]]\" href=\"https://w3c.github.io/web-share/#dfn-sharepromise\" class=\"internalDFN\" id=\"ref-for-dfn-sharepromise-8\"><code>[[sharePromise<!---0.104638%-->]]<!---0.104638%--></code></a><!---0.104638%--> to <code>null<!---0.104638%--></code>."
                },
                {
                  "html": "Terminate this algorithm."
                }
              ]
            },
            {
              "html": "Activate the chosen <a href=\"https://w3c.github.io/web-share/#dfn-share-target\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-share-target-8\">share target</a>, <a href=\"https://w3c.github.io/web-share/#dfn-convert-data-to-a-format-suitable-for-ingestion-into-the-target\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-convert-data-to-a-format-suitable-for-ingestion-into-the-target-1\">convert <var data-type=\"ShareData\">data<!---0.104638%--></var>\n                to a format suitable for ingestion into the target</a>, and\n                transmit the converted data to the target."
            },
            {
              "html": "If an error occurs starting the target or transmitting the\n                data, <a data-link-type=\"dfn|abstract-op\" data-cite=\"html\" data-cite-path=\"/webappapis.html\" data-cite-frag=\"queue-a-global-task\" data-type=\"dfn\" href=\"https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-global-task\">queue a global task<!---0.104638%--></a> on the <a data-link-type=\"dfn|abstract-op\" data-cite=\"html\" data-cite-path=\"/webappapis.html\" data-cite-frag=\"user-interaction-task-source\" data-type=\"dfn\" href=\"https://html.spec.whatwg.org/multipage/webappapis.html#user-interaction-task-source\">user interaction task source<!---0.104638%--></a> using <var data-type=\"Window\">global<!---0.104638%--></var> to:",
              "rationale": "reject",
              "steps": [
                {
                  "html": "<a data-link-type=\"dfn|abstract-op\" data-cite=\"webidl\" data-cite-path=\"/\" data-cite-frag=\"reject\" data-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#reject\">Reject<!---0.104638%--></a> <a data-link-type=\"dfn|abstract-op\" data-cite=\"webidl\" data-cite-path=\"/\" data-cite-frag=\"this\" data-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\">this<!---0.104638%--></a>.<!---0.104638%--><a data-xref-type=\"attribute\" data-link-type=\"attribute\" data-link-for=\"Navigator\" data-xref-for=\"Navigator\" data-lt=\"[[sharePromise]]\" href=\"https://w3c.github.io/web-share/#dfn-sharepromise\" class=\"internalDFN\" id=\"ref-for-dfn-sharepromise-9\"><code>[[sharePromise<!---0.104638%-->]]<!---0.104638%--></code></a><!---0.104638%--> with\n                    an \"<a data-link-type=\"idl\" data-cite=\"webidl\" data-xref-type=\"exception\" data-cite-path=\"/\" data-cite-frag=\"dataerror\" data-type=\"exception\" href=\"https://webidl.spec.whatwg.org/#dataerror\"><code>DataError<!---0.104638%--></code></a>\"<!---0.104638%--> <a data-xref-type=\"_IDL_\" data-link-type=\"idl\" data-lt=\"DOMException\" data-cite=\"webidl\" data-cite-path=\"/\" data-cite-frag=\"idl-DOMException\" data-type=\"interface\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\"><code>DOMException<!---0.104638%--></code></a><!---0.104638%-->."
                },
                {
                  "html": "Set <a data-link-type=\"dfn|abstract-op\" data-cite=\"webidl\" data-cite-path=\"/\" data-cite-frag=\"this\" data-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\">this<!---0.104638%--></a>.<!---0.104638%--><a data-xref-type=\"attribute\" data-link-type=\"attribute\" data-link-for=\"Navigator\" data-xref-for=\"Navigator\" data-lt=\"[[sharePromise]]\" href=\"https://w3c.github.io/web-share/#dfn-sharepromise\" class=\"internalDFN\" id=\"ref-for-dfn-sharepromise-10\"><code>[[sharePromise<!---0.104638%-->]]<!---0.104638%--></code></a><!---0.104638%--> to <code>null<!---0.104638%--></code>."
                },
                {
                  "html": "Terminate this algorithm."
                }
              ]
            },
            {
              "html": "Once the data has either been successfully transmitted to\n                the <a data-link-type=\"dfn|abstract-op\" href=\"https://w3c.github.io/web-share/#dfn-share-target\" class=\"internalDFN\" id=\"ref-for-dfn-share-target-9\">share target<!---0.104638%--></a>, or successfully transmitted to the OS (if\n                the transmission to the <a data-link-type=\"dfn|abstract-op\" href=\"https://w3c.github.io/web-share/#dfn-share-target\" class=\"internalDFN\" id=\"ref-for-dfn-share-target-10\">share target<!---0.104638%--></a> cannot be confirmed),\n                <a data-link-type=\"dfn|abstract-op\" data-cite=\"html\" data-cite-path=\"/webappapis.html\" data-cite-frag=\"queue-a-global-task\" data-type=\"dfn\" href=\"https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-global-task\">queue a global task<!---0.104638%--></a> on the <a data-link-type=\"dfn|abstract-op\" data-cite=\"html\" data-cite-path=\"/webappapis.html\" data-cite-frag=\"user-interaction-task-source\" data-type=\"dfn\" href=\"https://html.spec.whatwg.org/multipage/webappapis.html#user-interaction-task-source\">user interaction task source<!---0.104638%--></a>\n                using <var data-type=\"Window\">global<!---0.104638%--></var> to:",
              "rationale": "resolve",
              "steps": [
                {
                  "html": "<a data-link-type=\"dfn|abstract-op\" data-cite=\"webidl\" data-cite-path=\"/\" data-cite-frag=\"resolve\" data-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#resolve\">Resolve<!---0.104638%--></a> <a data-link-type=\"dfn|abstract-op\" data-cite=\"webidl\" data-cite-path=\"/\" data-cite-frag=\"this\" data-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\">this<!---0.104638%--></a>.<!---0.104638%--><a data-xref-type=\"attribute\" data-link-type=\"attribute\" data-link-for=\"Navigator\" data-xref-for=\"Navigator\" data-lt=\"[[sharePromise]]\" href=\"https://w3c.github.io/web-share/#dfn-sharepromise\" class=\"internalDFN\" id=\"ref-for-dfn-sharepromise-11\"><code>[[sharePromise<!---0.104638%-->]]<!---0.104638%--></code></a><!---0.104638%-->\n                    with <code>undefined<!---0.104638%--></code>."
                },
                {
                  "html": "Set <a data-link-type=\"dfn|abstract-op\" data-cite=\"webidl\" data-cite-path=\"/\" data-cite-frag=\"this\" data-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\">this<!---0.104638%--></a>.<!---0.104638%--><a data-xref-type=\"attribute\" data-link-type=\"attribute\" data-link-for=\"Navigator\" data-xref-for=\"Navigator\" data-lt=\"[[sharePromise]]\" href=\"https://w3c.github.io/web-share/#dfn-sharepromise\" class=\"internalDFN\" id=\"ref-for-dfn-sharepromise-12\"><code>[[sharePromise<!---0.104638%-->]]<!---0.104638%--></code></a><!---0.104638%--> to <code>null<!---0.104638%--></code>."
                }
              ]
            }
          ]
        }
      ]
    },
    {
      "name": "Navigator/canShare()",
      "href": "https://w3c.github.io/web-share/#dom-navigator-canshare",
      "html": "When the <dfn data-export=\"\" data-dfn-type=\"method\" id=\"dom-navigator-canshare\" data-idl=\"operation\" data-title=\"canShare()\" data-dfn-for=\"Navigator\" data-type=\"boolean\" data-lt=\"canShare()|canShare(data)\" data-local-lt=\"Navigator.canShare|Navigator.canShare()|canShare\" tabindex=\"0\" aria-haspopup=\"dialog\"><code>canShare()</code></dfn> method is called with argument\n            <a data-xref-type=\"_IDL_\" data-link-type=\"idl\" data-lt=\"ShareData\" href=\"https://w3c.github.io/web-share/#dom-sharedata\" class=\"internalDFN\" id=\"ref-for-dom-sharedata-4\"><code>ShareData<!---0.104638%--></code></a><!---0.104638%--> <var data-type=\"ShareData\">data<!---0.104638%--></var>, run the following steps:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "Let <var data-type=\"Document\">document<!---0.104638%--></var> be the <a data-link-type=\"dfn|abstract-op\" data-cite=\"webidl\" data-cite-path=\"/\" data-cite-frag=\"this\" data-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\">this<!---0.104638%--></a>'s <a data-link-type=\"dfn|abstract-op\" data-cite=\"html\" data-cite-path=\"/webappapis.html\" data-cite-frag=\"concept-relevant-global\" data-type=\"dfn\" href=\"https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global\">relevant global object<!---0.104638%--></a>'s <a data-link-type=\"dfn|abstract-op\" data-cite=\"html\" data-cite-path=\"/nav-history-apis.html\" data-cite-frag=\"concept-document-window\" data-type=\"dfn\" href=\"https://html.spec.whatwg.org/multipage/nav-history-apis.html#concept-document-window\">associated <code>Document<!---0.104638%--></code><!---0.104638%--></a>."
        },
        {
          "html": "If <var data-type=\"Document\">document<!---0.104638%--></var> is not <a data-link-type=\"dfn|abstract-op\" data-link-for=\"Document\" data-xref-for=\"Document\" data-cite=\"html\" data-cite-path=\"/document-sequences.html\" data-cite-frag=\"fully-active\" data-type=\"dfn\" href=\"https://html.spec.whatwg.org/multipage/document-sequences.html#fully-active\">fully active<!---0.104638%--></a>, return false."
        },
        {
          "html": "If <var data-type=\"Document\">document<!---0.104638%--></var> is not <a data-cite=\"html\" data-cite-path=\"/iframe-embed-object.html\" data-cite-frag=\"allowed-to-use\" data-type=\"dfn\" href=\"https://html.spec.whatwg.org/multipage/iframe-embed-object.html#allowed-to-use\">allowed to use</a> <a href=\"https://w3c.github.io/web-share/#dfn-web-share\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-web-share-2\"><code>\"web-share\"</code></a>,\n            return false."
        },
        {
          "html": "Return the result of <a data-link-type=\"dfn|abstract-op\" href=\"https://w3c.github.io/web-share/#dfn-validate-share-data\" class=\"internalDFN\" id=\"ref-for-dfn-validate-share-data-3\">validate share data<!---0.104638%--></a> with <var data-type=\"ShareData\">data<!---0.104638%--></var> and\n            <a data-link-type=\"dfn|abstract-op\" data-cite=\"webidl\" data-cite-path=\"/\" data-cite-frag=\"this\" data-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\">this<!---0.104638%--></a>'s <a data-link-type=\"dfn|abstract-op\" data-cite=\"html\" data-cite-path=\"/webappapis.html\" data-cite-frag=\"relevant-settings-object\" data-type=\"dfn\" href=\"https://html.spec.whatwg.org/multipage/webappapis.html#relevant-settings-object\">relevant settings object<!---0.104638%--></a>'s <a data-link-type=\"dfn|abstract-op\" data-link-for=\"environment settings object\" data-xref-for=\"environment settings object\" data-cite=\"html\" data-cite-path=\"/webappapis.html\" data-cite-frag=\"api-base-url\" data-type=\"dfn\" href=\"https://html.spec.whatwg.org/multipage/webappapis.html#api-base-url\">API base URL<!---0.104638%--></a>."
        }
      ]
    },
    {
      "name": "validate share data",
      "href": "https://w3c.github.io/web-share/#dfn-validate-share-data",
      "html": "To <dfn id=\"dfn-validate-share-data\" tabindex=\"0\" aria-haspopup=\"dialog\" data-dfn-type=\"dfn\">validate share data</dfn> with <var data-type=\"ShareData\">data<!---0.104638%--></var> and\n            <var data-type=\"URL\">base<!---0.104638%--></var>, run the following steps:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "If none of <var data-type=\"ShareData\">data<!---0.104638%--></var>'s members <!---0.104638%--><a data-link-type=\"idl\" data-xref-type=\"attribute|dict-member|const\" data-link-for=\"ShareData\" data-xref-for=\"ShareData\" href=\"https://w3c.github.io/web-share/#dom-sharedata-title\" class=\"internalDFN\" id=\"ref-for-dom-sharedata-title-2\"><code>title<!---0.104638%--></code></a><!---0.104638%-->,\n            <!---0.104638%--><a data-link-type=\"idl\" data-xref-type=\"attribute|dict-member|const\" data-link-for=\"ShareData\" data-xref-for=\"ShareData\" href=\"https://w3c.github.io/web-share/#dom-sharedata-text\" class=\"internalDFN\" id=\"ref-for-dom-sharedata-text-1\"><code>text<!---0.104638%--></code></a><!---0.104638%-->, or <!---0.104638%--><a data-link-type=\"idl\" data-xref-type=\"attribute|dict-member|const\" data-link-for=\"ShareData\" data-xref-for=\"ShareData\" href=\"https://w3c.github.io/web-share/#dom-sharedata-url\" class=\"internalDFN\" id=\"ref-for-dom-sharedata-url-5\"><code>url<!---0.104638%--></code></a><!---0.104638%--> or <!---0.104638%--><a data-link-type=\"idl\" data-xref-type=\"attribute|dict-member|const\" data-link-for=\"ShareData\" data-xref-for=\"ShareData\" href=\"https://w3c.github.io/web-share/#dom-sharedata-files\" class=\"internalDFN\" id=\"ref-for-dom-sharedata-files-2\"><code>files<!---0.104638%--></code></a><!---0.104638%--> are\n            present, return false."
        },
        {
          "html": "Let <var data-type=\"boolean\">titleTextOrUrl<!---0.104638%--></var> be true if any of\n            <!---0.104638%--><a data-link-type=\"idl\" data-xref-type=\"attribute|dict-member|const\" data-link-for=\"ShareData\" data-xref-for=\"ShareData\" href=\"https://w3c.github.io/web-share/#dom-sharedata-title\" class=\"internalDFN\" id=\"ref-for-dom-sharedata-title-3\"><code>title<!---0.104638%--></code></a><!---0.104638%-->, or <!---0.104638%--><a data-link-type=\"idl\" data-xref-type=\"attribute|dict-member|const\" data-link-for=\"ShareData\" data-xref-for=\"ShareData\" href=\"https://w3c.github.io/web-share/#dom-sharedata-text\" class=\"internalDFN\" id=\"ref-for-dom-sharedata-text-2\"><code>text<!---0.104638%--></code></a><!---0.104638%-->, or <!---0.104638%--><a data-link-type=\"idl\" data-xref-type=\"attribute|dict-member|const\" data-link-for=\"ShareData\" data-xref-for=\"ShareData\" href=\"https://w3c.github.io/web-share/#dom-sharedata-url\" class=\"internalDFN\" id=\"ref-for-dom-sharedata-url-6\"><code>url<!---0.104638%--></code></a><!---0.104638%--> is\n            present."
        },
        {
          "html": "If <var data-type=\"ShareData\">data<!---0.104638%--></var>'s <!---0.104638%--><a data-link-type=\"idl\" data-xref-type=\"attribute|dict-member|const\" data-link-for=\"ShareData\" data-xref-for=\"ShareData\" href=\"https://w3c.github.io/web-share/#dom-sharedata-files\" class=\"internalDFN\" id=\"ref-for-dom-sharedata-files-3\"><code>files<!---0.104638%--></code></a><!---0.104638%--> member is present:",
          "rationale": "if",
          "steps": [
            {
              "html": "If <var data-type=\"boolean\">titleTextOrUrl<!---0.104638%--></var> is false and <var data-type=\"ShareData\">data<!---0.104638%--></var>'s\n                <!---0.104638%--><a data-link-type=\"idl\" data-xref-type=\"attribute|dict-member|const\" data-link-for=\"ShareData\" data-xref-for=\"ShareData\" href=\"https://w3c.github.io/web-share/#dom-sharedata-files\" class=\"internalDFN\" id=\"ref-for-dom-sharedata-files-4\"><code>files<!---0.104638%--></code></a><!---0.104638%--> member is empty, return false."
            },
            {
              "html": "If the implementation does not support file sharing, return\n                false."
            },
            {
              "html": "If the user agent believes sharing any of the files in\n                <code>files<!---0.104638%--></code> would result in a potentially hostile share (i.e., the\n                user agent determines a file is malicious in some way, because\n                of its contents, size, or other characteristic), return false."
            }
          ]
        },
        {
          "html": "If <var data-type=\"ShareData\">data<!---0.104638%--></var>'s <!---0.104638%--><a data-link-type=\"idl\" data-xref-type=\"attribute|dict-member|const\" data-link-for=\"ShareData\" data-xref-for=\"ShareData\" href=\"https://w3c.github.io/web-share/#dom-sharedata-url\" class=\"internalDFN\" id=\"ref-for-dom-sharedata-url-7\"><code>url<!---0.104638%--></code></a><!---0.104638%--> member is present:",
          "rationale": "let",
          "steps": [
            {
              "html": "Let <var data-type=\"URL\">url<!---0.104638%--></var> be the result of running the <a data-link-type=\"dfn|abstract-op\" data-cite=\"url\" data-cite-path=\"/\" data-cite-frag=\"concept-url-parser\" data-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-parser\">URL parser<!---0.104638%--></a>\n                on <var data-type=\"ShareData\">data<!---0.104638%--></var>'s <!---0.104638%--><a data-link-type=\"idl\" data-xref-type=\"attribute|dict-member|const\" data-link-for=\"ShareData\" data-xref-for=\"ShareData\" href=\"https://w3c.github.io/web-share/#dom-sharedata-url\" class=\"internalDFN\" id=\"ref-for-dom-sharedata-url-8\"><code>url<!---0.104638%--></code></a><!---0.104638%--> member, with <var data-type=\"URL\">base<!---0.104638%--></var>, and no\n                encoding override."
            },
            {
              "html": "If <var data-type=\"URL\">url<!---0.104638%--></var> is failure, return false."
            },
            {
              "html": "If the <var data-type=\"URL\">url<!---0.104638%--></var>'s <a data-link-type=\"dfn|abstract-op\" data-link-for=\"url\" data-xref-for=\"URL\" data-cite=\"url\" data-cite-path=\"/\" data-cite-frag=\"concept-url-scheme\" data-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-scheme\">scheme<!---0.104638%--></a> is a <a data-link-type=\"dfn|abstract-op\" data-cite=\"fetch\" data-cite-path=\"/\" data-cite-frag=\"local-scheme\" data-type=\"dfn\" href=\"https://fetch.spec.whatwg.org/#local-scheme\">local scheme<!---0.104638%--></a>, or\n                <code>file<!---0.104638%--></code>, or <code>javascript<!---0.104638%--></code>, or <code>ws<!---0.104638%--></code>, or <code>wss<!---0.104638%--></code>, return false."
            },
            {
              "html": "If <var data-type=\"URL\">url<!---0.104638%--></var>'s <a data-link-type=\"dfn|abstract-op\" data-link-for=\"url\" data-xref-for=\"URL\" data-cite=\"url\" data-cite-path=\"/\" data-cite-frag=\"concept-url-scheme\" data-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url-scheme\">scheme<!---0.104638%--></a> is not a <a data-link-type=\"dfn|abstract-op\" href=\"https://w3c.github.io/web-share/#dfn-sharable-scheme\" class=\"internalDFN\" id=\"ref-for-dfn-sharable-scheme-2\">sharable scheme<!---0.104638%--></a>,\n                return false."
            }
          ]
        },
        {
          "html": "Return true."
        }
      ]
    }
  ]
}