{
  "spec": {
    "title": "Push API",
    "url": "https://w3c.github.io/push-api/"
  },
  "algorithms": [
    {
      "name": "create a push subscription",
      "href": "https://w3c.github.io/push-api/#dfn-create-a-push-subscription",
      "html": "To <dfn id=\"dfn-create-a-push-subscription\" tabindex=\"0\" aria-haspopup=\"dialog\" data-dfn-type=\"dfn\">create a push subscription</dfn>, given an <a data-xref-type=\"_IDL_\" data-link-type=\"idl\" data-lt=\"PushSubscriptionOptionsInit\" href=\"https://w3c.github.io/push-api/#dom-pushsubscriptionoptionsinit\" class=\"internalDFN\" id=\"ref-for-dom-pushsubscriptionoptionsinit-1\"><code>PushSubscriptionOptionsInit<!---0.805918%--></code></a><!---0.805918%-->\n          <var data-type=\"PushSubscriptionOptionsInit\">optionsDictionary<!---0.805918%--></var>:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "Let <var data-type=\"PushSubscription\">subscription<!---0.805918%--></var> be a new <a data-xref-type=\"_IDL_\" data-link-type=\"idl\" data-lt=\"PushSubscription\" href=\"https://w3c.github.io/push-api/#dom-pushsubscription\" class=\"internalDFN\" id=\"ref-for-dom-pushsubscription-3\"><code>PushSubscription<!---0.805918%--></code></a><!---0.805918%-->."
        },
        {
          "html": "Let <var data-type=\"PushSubscriptionOptions\">options<!---0.805918%--></var> be a newly created <a data-xref-type=\"_IDL_\" data-link-type=\"idl\" data-lt=\"PushSubscriptionOptions\" href=\"https://w3c.github.io/push-api/#dom-pushsubscriptionoptions\" class=\"internalDFN\" id=\"ref-for-dom-pushsubscriptionoptions-1\"><code>PushSubscriptionOptions<!---0.805918%--></code></a><!---0.805918%-->\n          object, initializing its attributes with the corresponding members and values of\n          <var data-type=\"PushSubscriptionOptionsInit\">optionsDictionary<!---0.805918%--></var>."
        },
        {
          "html": "Set <var data-type=\"PushSubscription\">subscription<!---0.805918%--></var>'s <!---0.805918%--><a data-link-type=\"idl\" data-xref-type=\"attribute|dict-member|const\" data-link-for=\"PushSubscription\" data-xref-for=\"PushSubscription\" href=\"https://w3c.github.io/push-api/#dom-pushsubscription-options\" class=\"internalDFN\" id=\"ref-for-dom-pushsubscription-options-1\"><code>options<!---0.805918%--></code></a><!---0.805918%--> attribute to <var data-type=\"PushSubscriptionOptions\">options<!---0.805918%--></var>."
        },
        {
          "html": "Generate a new P-256 <a href=\"https://w3c.github.io/push-api/#dfn-ecdh\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-ecdh-2\"><abbr title=\"elliptic curve Diffie-Hellman\">ECDH<!---0.805918%--></abbr></a> key pair [<cite><a class=\"bibref\" data-link-type=\"biblio\" href=\"https://w3c.github.io/push-api/#bib-ansi-x9-62\" title=\"Public Key Cryptography for the Financial Services Industry, The Elliptic Curve Digital Signature Algorithm (ECDSA)\">ANSI-X9-62<!---0.805918%--></a></cite><!---0.805918%-->]. Store the private key in an\n          internal slot on <var data-type=\"PushSubscription\">subscription<!---0.805918%--></var>; this value <em class=\"rfc2119\">MUST NOT<!---0.805918%--></em> be made available to applications.\n          The public key is also stored in an internal slot and can be retrieved by calling the\n          <!---0.805918%--><a data-link-type=\"idl\" data-xref-type=\"method\" data-link-for=\"PushSubscription\" data-xref-for=\"PushSubscription\" data-lt=\"getKey()\" href=\"https://w3c.github.io/push-api/#dom-pushsubscription-getkey\" class=\"internalDFN\" id=\"ref-for-dom-pushsubscription-getkey-1\"><code>getKey<!---0.805918%--></code></a><code>(<!---0.805918%--><!---0.805918%--><!---0.805918%-->)</code><!---0.805918%--><!---0.805918%--> method of the <a data-xref-type=\"_IDL_\" data-link-type=\"idl\" data-lt=\"PushSubscription\" href=\"https://w3c.github.io/push-api/#dom-pushsubscription\" class=\"internalDFN\" id=\"ref-for-dom-pushsubscription-4\"><code>PushSubscription<!---0.805918%--></code></a><!---0.805918%--> with an argument of\n          \"<a data-link-type=\"idl\" data-xref-type=\"enum-value\" data-link-for=\"PushEncryptionKeyName\" data-xref-for=\"PushEncryptionKeyName\" href=\"https://w3c.github.io/push-api/#dom-pushencryptionkeyname-p256dh\" class=\"internalDFN\" id=\"ref-for-dom-pushencryptionkeyname-p256dh-1\"><code>p256dh<!---0.805918%--></code></a>\"<!---0.805918%-->."
        },
        {
          "html": "Generate a new authentication secret, which is a sequence of octets as defined in\n          [<cite><a class=\"bibref\" data-link-type=\"biblio\" href=\"https://w3c.github.io/push-api/#bib-rfc8291\" title=\"Message Encryption for Web Push\">RFC8291<!---0.805918%--></a></cite><!---0.805918%-->]. Store the authentication secret in an internal slot on <var data-type=\"PushSubscription\">subscription<!---0.805918%--></var>. This\n          key can be retrieved by calling the <!---0.805918%--><a data-link-type=\"idl\" data-xref-type=\"method\" data-link-for=\"PushSubscription\" data-xref-for=\"PushSubscription\" data-lt=\"getKey()\" href=\"https://w3c.github.io/push-api/#dom-pushsubscription-getkey\" class=\"internalDFN\" id=\"ref-for-dom-pushsubscription-getkey-2\"><code>getKey<!---0.805918%--></code></a><code>(<!---0.805918%--><!---0.805918%--><!---0.805918%-->)</code><!---0.805918%--><!---0.805918%--> method of the\n          <a data-xref-type=\"_IDL_\" data-link-type=\"idl\" data-lt=\"PushSubscription\" href=\"https://w3c.github.io/push-api/#dom-pushsubscription\" class=\"internalDFN\" id=\"ref-for-dom-pushsubscription-5\"><code>PushSubscription<!---0.805918%--></code></a><!---0.805918%--> with an argument of \"<a data-link-type=\"idl\" data-xref-type=\"enum-value\" data-link-for=\"PushEncryptionKeyName\" data-xref-for=\"PushEncryptionKeyName\" href=\"https://w3c.github.io/push-api/#dom-pushencryptionkeyname-auth\" class=\"internalDFN\" id=\"ref-for-dom-pushencryptionkeyname-auth-1\"><code>auth<!---0.805918%--></code></a>\"<!---0.805918%-->."
        },
        {
          "html": "Request a new <a href=\"https://w3c.github.io/push-api/#dfn-push-subscription\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-push-subscription-12\">push subscription</a>. Include the\n          <!---0.805918%--><a data-link-type=\"idl\" data-xref-type=\"attribute|dict-member|const\" data-link-for=\"PushSubscriptionOptions\" data-xref-for=\"PushSubscriptionOptions\" href=\"https://w3c.github.io/push-api/#dom-pushsubscriptionoptions-applicationserverkey\" class=\"internalDFN\" id=\"ref-for-dom-pushsubscriptionoptions-applicationserverkey-1\"><code>applicationServerKey<!---0.805918%--></code></a><!---0.805918%--> attribute of <var data-type=\"PushSubscriptionOptions\">options<!---0.805918%--></var> when it has been\n          set. Rethrow any <a data-link-type=\"dfn|abstract-op\" data-cite=\"webidl\" data-cite-path=\"/\" data-cite-frag=\"dfn-exception\" data-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-exception\">exceptions<!---0.805918%--></a>."
        },
        {
          "html": "When the <a href=\"https://w3c.github.io/push-api/#dfn-push-subscription\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-push-subscription-13\">push subscription</a> request has completed successfully:",
          "rationale": "set",
          "steps": [
            {
              "html": "Set <var data-type=\"PushSubscription\">subscription<!---0.805918%--></var>'s <!---0.805918%--><a data-link-type=\"idl\" data-xref-type=\"attribute|dict-member|const\" data-link-for=\"PushSubscription\" data-xref-for=\"PushSubscription\" href=\"https://w3c.github.io/push-api/#dom-pushsubscription-endpoint\" class=\"internalDFN\" id=\"ref-for-dom-pushsubscription-endpoint-1\"><code>endpoint<!---0.805918%--></code></a><!---0.805918%--> attribute to the <a data-link-type=\"dfn|abstract-op\" data-cite=\"url\" data-cite-path=\"/\" data-cite-frag=\"concept-url\" data-type=\"dfn\" href=\"https://url.spec.whatwg.org/#concept-url\">URL<!---0.805918%--></a>\n              provided by the <a href=\"https://w3c.github.io/push-api/#dfn-push-subscription\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-push-subscription-14\">push subscription</a>."
            },
            {
              "html": "If provided by the <a href=\"https://w3c.github.io/push-api/#dfn-push-subscription\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-push-subscription-15\">push subscription</a>, set <var data-type=\"PushSubscription\">subscription<!---0.805918%--></var>'s\n              <!---0.805918%--><a data-link-type=\"idl\" data-xref-type=\"attribute|dict-member|const\" data-link-for=\"PushSubscription\" data-xref-for=\"PushSubscription\" href=\"https://w3c.github.io/push-api/#dom-pushsubscription-expirationtime\" class=\"internalDFN\" id=\"ref-for-dom-pushsubscription-expirationtime-1\"><code>expirationTime<!---0.805918%--></code></a><!---0.805918%-->."
            }
          ]
        },
        {
          "html": "Return <var data-type=\"PushSubscription\">subscription<!---0.805918%--></var>."
        }
      ]
    },
    {
      "name": "PushManager/subscribe()",
      "href": "https://w3c.github.io/push-api/#dom-pushmanager-subscribe",
      "html": "The <dfn data-export=\"\" data-dfn-type=\"method\" id=\"dom-pushmanager-subscribe\" data-idl=\"operation\" data-title=\"subscribe()\" data-dfn-for=\"PushManager\" data-type=\"Promise\" data-lt=\"subscribe()|subscribe(options)\" data-local-lt=\"PushManager.subscribe|PushManager.subscribe()|subscribe\" tabindex=\"0\" aria-haspopup=\"dialog\"><code>subscribe()</code></dfn> method when invoked <em class=\"rfc2119\">MUST<!---0.805918%--></em> run the following steps:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "Let <var>promise<!---0.805918%--></var> be <a data-link-type=\"dfn|abstract-op\" data-cite=\"webidl\" data-cite-path=\"/\" data-cite-frag=\"a-new-promise\" data-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#a-new-promise\">a new promise<!---0.805918%--></a>."
        },
        {
          "html": "Let <var>global<!---0.805918%--></var> be <a data-link-type=\"dfn|abstract-op\" data-cite=\"webidl\" data-cite-path=\"/\" data-cite-frag=\"this\" data-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\">this<!---0.805918%--></a>' <a data-link-type=\"dfn|abstract-op\" data-cite=\"html\" data-cite-path=\"/webappapis.html\" data-cite-frag=\"concept-relevant-global\" data-type=\"dfn\" href=\"https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global\">relevant global object<!---0.805918%--></a>."
        },
        {
          "html": "Return <var>promise<!---0.805918%--></var> and continue <a data-link-type=\"dfn|abstract-op\" data-cite=\"html\" data-cite-path=\"/infrastructure.html\" data-cite-frag=\"in-parallel\" data-type=\"dfn\" href=\"https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel\">in parallel<!---0.805918%--></a>."
        },
        {
          "html": "If the <var>options<!---0.805918%--></var> argument has a <!---0.805918%--><a data-link-type=\"idl\" data-xref-type=\"attribute|dict-member|const\" data-link-for=\"PushSubscriptionOptionsInit\" data-xref-for=\"PushSubscriptionOptionsInit\" href=\"https://w3c.github.io/push-api/#dom-pushsubscriptionoptionsinit-uservisibleonly\" class=\"internalDFN\" id=\"ref-for-dom-pushsubscriptionoptionsinit-uservisibleonly-3\"><code>userVisibleOnly<!---0.805918%--></code></a><!---0.805918%--> value\n        set to <code>false<!---0.805918%--></code> and the user agent requires it to be <code>true<!---0.805918%--></code>, <a data-link-type=\"dfn|abstract-op\" data-cite=\"html\" data-cite-path=\"/webappapis.html\" data-cite-frag=\"queue-a-global-task\" data-type=\"dfn\" href=\"https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-global-task\">queue a global task<!---0.805918%--></a> on the\n        <a data-link-type=\"dfn|abstract-op\" data-cite=\"html\" data-cite-path=\"/webappapis.html\" data-cite-frag=\"networking-task-source\" data-type=\"dfn\" href=\"https://html.spec.whatwg.org/multipage/webappapis.html#networking-task-source\">networking task source<!---0.805918%--></a> using <var>global<!---0.805918%--></var> to <a data-link-type=\"dfn|abstract-op\" data-cite=\"webidl\" data-cite-path=\"/\" data-cite-frag=\"reject\" data-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#reject\">reject<!---0.805918%--></a> <var>promise<!---0.805918%--></var> \"<a data-link-type=\"idl\" data-cite=\"webidl\" data-xref-type=\"exception\" data-cite-path=\"/\" data-cite-frag=\"notallowederror\" data-type=\"exception\" href=\"https://webidl.spec.whatwg.org/#notallowederror\"><code>NotAllowedError<!---0.805918%--></code></a>\"<!---0.805918%-->\n        <a data-xref-type=\"_IDL_\" data-link-type=\"idl\" data-lt=\"DOMException\" data-cite=\"webidl\" data-cite-path=\"/\" data-cite-frag=\"idl-DOMException\" data-type=\"interface\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\"><code>DOMException<!---0.805918%--></code></a><!---0.805918%-->"
        },
        {
          "html": "If the <var>options<!---0.805918%--></var> argument does not include a non-null value for the\n        <!---0.805918%--><a data-link-type=\"idl\" data-xref-type=\"attribute|dict-member|const\" data-link-for=\"PushSubscriptionOptionsInit\" data-xref-for=\"PushSubscriptionOptionsInit\" href=\"https://w3c.github.io/push-api/#dom-pushsubscriptionoptionsinit-applicationserverkey\" class=\"internalDFN\" id=\"ref-for-dom-pushsubscriptionoptionsinit-applicationserverkey-2\"><code>applicationServerKey<!---0.805918%--></code></a><!---0.805918%--> member, and the <a href=\"https://w3c.github.io/push-api/#dfn-push-service\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-push-service-23\">push service</a>\n        requires one to be given, <a data-link-type=\"dfn|abstract-op\" data-cite=\"html\" data-cite-path=\"/webappapis.html\" data-cite-frag=\"queue-a-global-task\" data-type=\"dfn\" href=\"https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-global-task\">queue a global task<!---0.805918%--></a> on the <a data-link-type=\"dfn|abstract-op\" data-cite=\"html\" data-cite-path=\"/webappapis.html\" data-cite-frag=\"networking-task-source\" data-type=\"dfn\" href=\"https://html.spec.whatwg.org/multipage/webappapis.html#networking-task-source\">networking task source<!---0.805918%--></a> using\n        <var>global<!---0.805918%--></var> to <a data-link-type=\"dfn|abstract-op\" data-cite=\"webidl\" data-cite-path=\"/\" data-cite-frag=\"reject\" data-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#reject\">reject<!---0.805918%--></a> <var>promise<!---0.805918%--></var> with a \"<a data-link-type=\"idl\" data-cite=\"webidl\" data-xref-type=\"exception\" data-cite-path=\"/\" data-cite-frag=\"notsupportederror\" data-type=\"exception\" href=\"https://webidl.spec.whatwg.org/#notsupportederror\"><code>NotSupportedError<!---0.805918%--></code></a>\"<!---0.805918%--> <a data-xref-type=\"_IDL_\" data-link-type=\"idl\" data-lt=\"DOMException\" data-cite=\"webidl\" data-cite-path=\"/\" data-cite-frag=\"idl-DOMException\" data-type=\"interface\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\"><code>DOMException<!---0.805918%--></code></a><!---0.805918%-->."
        },
        {
          "html": "If the <var>options<!---0.805918%--></var> argument includes a non-null value for the\n        <!---0.805918%--><a data-link-type=\"idl\" data-xref-type=\"attribute|dict-member|const\" data-link-for=\"PushSubscriptionOptions\" data-xref-for=\"PushSubscriptionOptions\" href=\"https://w3c.github.io/push-api/#dom-pushsubscriptionoptions-applicationserverkey\" class=\"internalDFN\" id=\"ref-for-dom-pushsubscriptionoptions-applicationserverkey-2\"><code>applicationServerKey<!---0.805918%--></code></a><!---0.805918%--> attribute, run the following sub-steps:",
          "rationale": "if",
          "steps": [
            {
              "html": "If <var>options<!---0.805918%--></var>'s <!---0.805918%--><a data-link-type=\"idl\" data-xref-type=\"attribute|dict-member|const\" data-link-for=\"PushSubscriptionOptionsInit\" data-xref-for=\"PushSubscriptionOptionsInit\" href=\"https://w3c.github.io/push-api/#dom-pushsubscriptionoptionsinit-applicationserverkey\" class=\"internalDFN\" id=\"ref-for-dom-pushsubscriptionoptionsinit-applicationserverkey-3\"><code>applicationServerKey<!---0.805918%--></code></a><!---0.805918%--> is a\n            <a data-xref-type=\"_IDL_\" data-link-type=\"idl\" data-lt=\"DOMString\" data-cite=\"webidl\" data-cite-path=\"/\" data-cite-frag=\"idl-DOMString\" data-type=\"interface\" href=\"https://webidl.spec.whatwg.org/#idl-DOMString\"><code>DOMString<!---0.805918%--></code></a><!---0.805918%-->, set its value to an <a data-xref-type=\"_IDL_\" data-link-type=\"idl\" data-lt=\"ArrayBuffer\" data-cite=\"webidl\" data-cite-path=\"/\" data-cite-frag=\"idl-ArrayBuffer\" data-type=\"interface\" href=\"https://webidl.spec.whatwg.org/#idl-ArrayBuffer\"><code>ArrayBuffer<!---0.805918%--></code></a><!---0.805918%--> containing the sequence of octets\n            that result from decoding <var>options<!---0.805918%--></var>'s\n            <!---0.805918%--><a data-link-type=\"idl\" data-xref-type=\"attribute|dict-member|const\" data-link-for=\"PushSubscriptionOptionsInit\" data-xref-for=\"PushSubscriptionOptionsInit\" href=\"https://w3c.github.io/push-api/#dom-pushsubscriptionoptionsinit-applicationserverkey\" class=\"internalDFN\" id=\"ref-for-dom-pushsubscriptionoptionsinit-applicationserverkey-4\"><code>applicationServerKey<!---0.805918%--></code></a><!---0.805918%--> using the base64url encoding\n            [<cite><a class=\"bibref\" data-link-type=\"biblio\" href=\"https://w3c.github.io/push-api/#bib-rfc7515\" title=\"JSON Web Signature (JWS)\">RFC7515<!---0.805918%--></a></cite><!---0.805918%-->]."
            },
            {
              "html": "If decoding fails, <a data-link-type=\"dfn|abstract-op\" data-cite=\"html\" data-cite-path=\"/webappapis.html\" data-cite-frag=\"queue-a-global-task\" data-type=\"dfn\" href=\"https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-global-task\">queue a global task<!---0.805918%--></a> on the <a data-link-type=\"dfn|abstract-op\" data-cite=\"html\" data-cite-path=\"/webappapis.html\" data-cite-frag=\"networking-task-source\" data-type=\"dfn\" href=\"https://html.spec.whatwg.org/multipage/webappapis.html#networking-task-source\">networking task source<!---0.805918%--></a> using\n            <var>global<!---0.805918%--></var> to <a data-link-type=\"dfn|abstract-op\" data-cite=\"webidl\" data-cite-path=\"/\" data-cite-frag=\"reject\" data-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#reject\">reject<!---0.805918%--></a> <var>promise<!---0.805918%--></var> with an \"<a data-link-type=\"idl\" data-cite=\"webidl\" data-xref-type=\"exception\" data-cite-path=\"/\" data-cite-frag=\"invalidcharactererror\" data-type=\"exception\" href=\"https://webidl.spec.whatwg.org/#invalidcharactererror\"><code>InvalidCharacterError<!---0.805918%--></code></a>\"<!---0.805918%--> <a data-xref-type=\"_IDL_\" data-link-type=\"idl\" data-lt=\"DOMException\" data-cite=\"webidl\" data-cite-path=\"/\" data-cite-frag=\"idl-DOMException\" data-type=\"interface\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\"><code>DOMException<!---0.805918%--></code></a><!---0.805918%-->\n            and terminate these steps."
            },
            {
              "html": "Ensure that <var>options<!---0.805918%--></var>'s <!---0.805918%--><a data-link-type=\"idl\" data-xref-type=\"attribute|dict-member|const\" data-link-for=\"PushSubscriptionOptionsInit\" data-xref-for=\"PushSubscriptionOptionsInit\" href=\"https://w3c.github.io/push-api/#dom-pushsubscriptionoptionsinit-applicationserverkey\" class=\"internalDFN\" id=\"ref-for-dom-pushsubscriptionoptionsinit-applicationserverkey-5\"><code>applicationServerKey<!---0.805918%--></code></a><!---0.805918%-->\n            describes a valid point on the P-256 curve. If its value is invalid, <a data-link-type=\"dfn|abstract-op\" data-cite=\"html\" data-cite-path=\"/webappapis.html\" data-cite-frag=\"queue-a-global-task\" data-type=\"dfn\" href=\"https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-global-task\">queue a global task<!---0.805918%--></a> on the <a data-link-type=\"dfn|abstract-op\" data-cite=\"html\" data-cite-path=\"/webappapis.html\" data-cite-frag=\"networking-task-source\" data-type=\"dfn\" href=\"https://html.spec.whatwg.org/multipage/webappapis.html#networking-task-source\">networking task source<!---0.805918%--></a> using <var>global<!---0.805918%--></var> to <a data-link-type=\"dfn|abstract-op\" data-cite=\"webidl\" data-cite-path=\"/\" data-cite-frag=\"reject\" data-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#reject\">reject<!---0.805918%--></a> <var>promise<!---0.805918%--></var> with an\n            \"<a data-link-type=\"idl\" data-cite=\"webidl\" data-xref-type=\"exception\" data-cite-path=\"/\" data-cite-frag=\"invalidaccesserror\" data-type=\"exception\" href=\"https://webidl.spec.whatwg.org/#invalidaccesserror\"><code>InvalidAccessError<!---0.805918%--></code></a>\"<!---0.805918%--> <a data-xref-type=\"_IDL_\" data-link-type=\"idl\" data-lt=\"DOMException\" data-cite=\"webidl\" data-cite-path=\"/\" data-cite-frag=\"idl-DOMException\" data-type=\"interface\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\"><code>DOMException<!---0.805918%--></code></a><!---0.805918%--> and terminate these steps."
            }
          ]
        },
        {
          "html": "Let <var data-type=\"ServiceWorkerRegistration\">registration<!---0.805918%--></var> be <a data-link-type=\"dfn|abstract-op\" data-cite=\"webidl\" data-cite-path=\"/\" data-cite-frag=\"this\" data-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\">this<!---0.805918%--></a>'s associated <a data-cite=\"service-workers\" data-cite-path=\"/\" data-cite-frag=\"dfn-service-worker-registration\" data-type=\"dfn\" href=\"https://www.w3.org/TR/service-workers/#dfn-service-worker-registration\">service worker\n        registration</a>."
        },
        {
          "html": "If <var data-type=\"ServiceWorkerRegistration\">registration<!---0.805918%--></var>'s <a data-link-type=\"dfn|abstract-op\" data-link-for=\"service worker registration\" data-xref-for=\"service worker registration\" data-cite=\"service-workers\" data-cite-path=\"/\" data-cite-frag=\"dfn-active-worker\" data-type=\"dfn\" href=\"https://www.w3.org/TR/service-workers/#dfn-active-worker\">active worker<!---0.805918%--></a> is null, <a data-link-type=\"dfn|abstract-op\" data-cite=\"html\" data-cite-path=\"/webappapis.html\" data-cite-frag=\"queue-a-global-task\" data-type=\"dfn\" href=\"https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-global-task\">queue a global task<!---0.805918%--></a> on the <a data-link-type=\"dfn|abstract-op\" data-cite=\"html\" data-cite-path=\"/webappapis.html\" data-cite-frag=\"networking-task-source\" data-type=\"dfn\" href=\"https://html.spec.whatwg.org/multipage/webappapis.html#networking-task-source\">networking task source<!---0.805918%--></a> using <var>global<!---0.805918%--></var> to <a data-link-type=\"dfn|abstract-op\" data-cite=\"webidl\" data-cite-path=\"/\" data-cite-frag=\"reject\" data-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#reject\">reject<!---0.805918%--></a> <var>promise<!---0.805918%--></var> with\n        an \"<a data-link-type=\"idl\" data-cite=\"webidl\" data-xref-type=\"exception\" data-cite-path=\"/\" data-cite-frag=\"invalidstateerror\" data-type=\"exception\" href=\"https://webidl.spec.whatwg.org/#invalidstateerror\"><code>InvalidStateError<!---0.805918%--></code></a>\"<!---0.805918%--> <a data-xref-type=\"_IDL_\" data-link-type=\"idl\" data-lt=\"DOMException\" data-cite=\"webidl\" data-cite-path=\"/\" data-cite-frag=\"idl-DOMException\" data-type=\"interface\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\"><code>DOMException<!---0.805918%--></code></a><!---0.805918%--> and terminate these steps."
        },
        {
          "html": "Let <var>sw<!---0.805918%--></var> be <var data-type=\"ServiceWorkerRegistration\">registration<!---0.805918%--></var>'s <a data-link-type=\"dfn|abstract-op\" data-link-for=\"service worker registration\" data-xref-for=\"service worker registration\" data-cite=\"service-workers\" data-cite-path=\"/\" data-cite-frag=\"dfn-active-worker\" data-type=\"dfn\" href=\"https://www.w3.org/TR/service-workers/#dfn-active-worker\">active worker<!---0.805918%--></a>."
        },
        {
          "html": "Let <var>permission<!---0.805918%--></var> be <a data-link-type=\"dfn|abstract-op\" data-cite=\"permissions\" data-cite-path=\"/\" data-cite-frag=\"dfn-request-permission-to-use\" data-type=\"dfn\" href=\"https://www.w3.org/TR/permissions/#dfn-request-permission-to-use\">request permission to use<!---0.805918%--></a> \"push\"."
        },
        {
          "html": "If <var>permission<!---0.805918%--></var> is \"<a data-link-type=\"idl\" data-xref-type=\"enum-value\" data-link-for=\"PermissionState\" data-xref-for=\"PermissionState\" data-cite=\"permissions\" data-cite-path=\"/\" data-cite-frag=\"dom-permissionstate-denied\" data-type=\"enum-value\" href=\"https://www.w3.org/TR/permissions/#dom-permissionstate-denied\"><code>denied<!---0.805918%--></code></a>\"<!---0.805918%-->, <a data-link-type=\"dfn|abstract-op\" data-cite=\"html\" data-cite-path=\"/webappapis.html\" data-cite-frag=\"queue-a-global-task\" data-type=\"dfn\" href=\"https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-global-task\">queue a global task<!---0.805918%--></a> on the <a data-link-type=\"dfn|abstract-op\" data-cite=\"html\" data-cite-path=\"/webappapis.html\" data-cite-frag=\"user-interaction-task-source\" data-type=\"dfn\" href=\"https://html.spec.whatwg.org/multipage/webappapis.html#user-interaction-task-source\">user interaction task source<!---0.805918%--></a> using <var>global<!---0.805918%--></var> to <a data-link-type=\"dfn|abstract-op\" data-cite=\"webidl\" data-cite-path=\"/\" data-cite-frag=\"reject\" data-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#reject\">reject<!---0.805918%--></a> <var>promise<!---0.805918%--></var> with a\n        \"<a data-link-type=\"idl\" data-cite=\"webidl\" data-xref-type=\"exception\" data-cite-path=\"/\" data-cite-frag=\"notallowederror\" data-type=\"exception\" href=\"https://webidl.spec.whatwg.org/#notallowederror\"><code>NotAllowedError<!---0.805918%--></code></a>\"<!---0.805918%--> <a data-xref-type=\"_IDL_\" data-link-type=\"idl\" data-lt=\"DOMException\" data-cite=\"webidl\" data-cite-path=\"/\" data-cite-frag=\"idl-DOMException\" data-type=\"interface\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\"><code>DOMException<!---0.805918%--></code></a><!---0.805918%--> and terminate these steps."
        },
        {
          "html": "If <var>sw<!---0.805918%--></var> is already subscribed, run the following sub-steps:",
          "rationale": "try",
          "steps": [
            {
              "html": "Try to retrieve the <a href=\"https://w3c.github.io/push-api/#dfn-push-subscription\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-push-subscription-49\">push subscription</a> associated with the <var>sw<!---0.805918%--></var>. If there is\n            an error, <a data-link-type=\"dfn|abstract-op\" data-cite=\"html\" data-cite-path=\"/webappapis.html\" data-cite-frag=\"queue-a-global-task\" data-type=\"dfn\" href=\"https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-global-task\">queue a global task<!---0.805918%--></a> on the <a data-link-type=\"dfn|abstract-op\" data-cite=\"html\" data-cite-path=\"/webappapis.html\" data-cite-frag=\"networking-task-source\" data-type=\"dfn\" href=\"https://html.spec.whatwg.org/multipage/webappapis.html#networking-task-source\">networking task source<!---0.805918%--></a> using <var>global<!---0.805918%--></var> to\n            <a data-link-type=\"dfn|abstract-op\" data-cite=\"webidl\" data-cite-path=\"/\" data-cite-frag=\"reject\" data-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#reject\">reject<!---0.805918%--></a> <var>promise<!---0.805918%--></var> with an \"<a data-link-type=\"idl\" data-cite=\"webidl\" data-xref-type=\"exception\" data-cite-path=\"/\" data-cite-frag=\"aborterror\" data-type=\"exception\" href=\"https://webidl.spec.whatwg.org/#aborterror\"><code>AbortError<!---0.805918%--></code></a>\"<!---0.805918%--> <a data-xref-type=\"_IDL_\" data-link-type=\"idl\" data-lt=\"DOMException\" data-cite=\"webidl\" data-cite-path=\"/\" data-cite-frag=\"idl-DOMException\" data-type=\"interface\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\"><code>DOMException<!---0.805918%--></code></a><!---0.805918%--> and terminate these\n            steps."
            },
            {
              "html": "Let <var>subscription<!---0.805918%--></var> be the <a href=\"https://w3c.github.io/push-api/#dfn-push-subscription\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-push-subscription-50\">push subscription</a> associated with <var>sw<!---0.805918%--></var>."
            },
            {
              "html": "Compare the <var>options<!---0.805918%--></var> argument with the <code>options<!---0.805918%--></code> attribute of <var>subscription<!---0.805918%--></var>. The\n            contents of <a data-xref-type=\"_IDL_\" data-link-type=\"idl\" data-lt=\"BufferSource\" data-cite=\"webidl\" data-cite-path=\"/\" data-cite-frag=\"BufferSource\" data-type=\"typedef\" href=\"https://webidl.spec.whatwg.org/#BufferSource\"><code>BufferSource<!---0.805918%--></code></a><!---0.805918%--> values are compared for equality rather than\n            <a data-link-type=\"dfn|abstract-op\" data-link-for=\"ECMAScript\" data-xref-for=\"ECMAScript\" data-lt=\"reference record\" data-cite=\"ecmascript\" data-cite-path=\"/ecmascript-data-types-and-values.html\" data-cite-frag=\"sec-reference-record-specification-type\" data-type=\"dfn\" href=\"https://tc39.es/ecma262/multipage/ecmascript-data-types-and-values.html#sec-reference-record-specification-type\">reference<!---0.805918%--></a>."
            },
            {
              "html": "If any attribute on <var>options<!---0.805918%--></var> contains a different value to that stored for\n            <var>subscription<!---0.805918%--></var>, then <a data-link-type=\"dfn|abstract-op\" data-cite=\"html\" data-cite-path=\"/webappapis.html\" data-cite-frag=\"queue-a-global-task\" data-type=\"dfn\" href=\"https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-global-task\">queue a global task<!---0.805918%--></a> on the <a data-link-type=\"dfn|abstract-op\" data-cite=\"html\" data-cite-path=\"/webappapis.html\" data-cite-frag=\"networking-task-source\" data-type=\"dfn\" href=\"https://html.spec.whatwg.org/multipage/webappapis.html#networking-task-source\">networking task source<!---0.805918%--></a> using\n            <var>global<!---0.805918%--></var> to <a data-link-type=\"dfn|abstract-op\" data-cite=\"webidl\" data-cite-path=\"/\" data-cite-frag=\"reject\" data-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#reject\">reject<!---0.805918%--></a> <var>promise<!---0.805918%--></var> with an \"<a data-link-type=\"idl\" data-cite=\"webidl\" data-xref-type=\"exception\" data-cite-path=\"/\" data-cite-frag=\"invalidstateerror\" data-type=\"exception\" href=\"https://webidl.spec.whatwg.org/#invalidstateerror\"><code>InvalidStateError<!---0.805918%--></code></a>\"<!---0.805918%--> <a data-xref-type=\"_IDL_\" data-link-type=\"idl\" data-lt=\"DOMException\" data-cite=\"webidl\" data-cite-path=\"/\" data-cite-frag=\"idl-DOMException\" data-type=\"interface\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\"><code>DOMException<!---0.805918%--></code></a><!---0.805918%--> and\n            terminate these steps."
            },
            {
              "html": "When the request has been completed, <a data-link-type=\"dfn|abstract-op\" data-cite=\"html\" data-cite-path=\"/webappapis.html\" data-cite-frag=\"queue-a-global-task\" data-type=\"dfn\" href=\"https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-global-task\">queue a global task<!---0.805918%--></a> on the <a data-link-type=\"dfn|abstract-op\" data-cite=\"html\" data-cite-path=\"/webappapis.html\" data-cite-frag=\"networking-task-source\" data-type=\"dfn\" href=\"https://html.spec.whatwg.org/multipage/webappapis.html#networking-task-source\">networking task source<!---0.805918%--></a> using <var>global<!---0.805918%--></var> to <a data-link-type=\"dfn|abstract-op\" data-cite=\"webidl\" data-cite-path=\"/\" data-cite-frag=\"resolve\" data-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#resolve\">resolve<!---0.805918%--></a> <var>promise<!---0.805918%--></var> with <var>subscription<!---0.805918%--></var> and terminate\n            these steps."
            }
          ]
        },
        {
          "html": "Let <var>subscription<!---0.805918%--></var> be the result of trying to <a data-link-type=\"dfn|abstract-op\" href=\"https://w3c.github.io/push-api/#dfn-create-a-push-subscription\" class=\"internalDFN\" id=\"ref-for-dfn-create-a-push-subscription-2\">create a push subscription<!---0.805918%--></a> with\n        <var>options<!---0.805918%--></var>. If creating the subscription <a data-link-type=\"dfn|abstract-op\" data-link-for=\"exception\" data-xref-for=\"exception\" data-cite=\"webidl\" data-cite-path=\"/\" data-cite-frag=\"dfn-throw\" data-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\">throws<!---0.805918%--></a> an <a data-link-type=\"dfn|abstract-op\" data-cite=\"webidl\" data-cite-path=\"/\" data-cite-frag=\"dfn-exception\" data-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-exception\">exception<!---0.805918%--></a>, <a data-link-type=\"dfn|abstract-op\" data-cite=\"html\" data-cite-path=\"/webappapis.html\" data-cite-frag=\"queue-a-global-task\" data-type=\"dfn\" href=\"https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-global-task\">queue a global task<!---0.805918%--></a> on the <a data-link-type=\"dfn|abstract-op\" data-cite=\"html\" data-cite-path=\"/webappapis.html\" data-cite-frag=\"networking-task-source\" data-type=\"dfn\" href=\"https://html.spec.whatwg.org/multipage/webappapis.html#networking-task-source\">networking task source<!---0.805918%--></a> using <var>global<!---0.805918%--></var> to <a data-link-type=\"dfn|abstract-op\" data-cite=\"webidl\" data-cite-path=\"/\" data-cite-frag=\"reject\" data-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#reject\">reject<!---0.805918%--></a> <var>promise<!---0.805918%--></var> with\n        a that <a data-link-type=\"dfn|abstract-op\" data-cite=\"webidl\" data-cite-path=\"/\" data-cite-frag=\"dfn-exception\" data-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-exception\">exception<!---0.805918%--></a> and terminate these these steps."
        },
        {
          "html": "Otherwise, <a data-link-type=\"dfn|abstract-op\" data-cite=\"html\" data-cite-path=\"/webappapis.html\" data-cite-frag=\"queue-a-global-task\" data-type=\"dfn\" href=\"https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-global-task\">queue a global task<!---0.805918%--></a> on the <a data-link-type=\"dfn|abstract-op\" data-cite=\"html\" data-cite-path=\"/webappapis.html\" data-cite-frag=\"networking-task-source\" data-type=\"dfn\" href=\"https://html.spec.whatwg.org/multipage/webappapis.html#networking-task-source\">networking task source<!---0.805918%--></a> using <var>global<!---0.805918%--></var> to\n        <a data-link-type=\"dfn|abstract-op\" data-cite=\"webidl\" data-cite-path=\"/\" data-cite-frag=\"resolve\" data-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#resolve\">resolve<!---0.805918%--></a> <var>promise<!---0.805918%--></var> with a <a data-xref-type=\"_IDL_\" data-link-type=\"idl\" data-lt=\"PushSubscription\" href=\"https://w3c.github.io/push-api/#dom-pushsubscription\" class=\"internalDFN\" id=\"ref-for-dom-pushsubscription-15\"><code>PushSubscription<!---0.805918%--></code></a><!---0.805918%--> providing the details of the new\n        <var>subscription<!---0.805918%--></var>."
        }
      ]
    },
    {
      "name": "PushManager/getSubscription()",
      "href": "https://w3c.github.io/push-api/#dom-pushmanager-getsubscription",
      "html": "The <dfn data-dfn-for=\"PushManager\" data-export=\"\" data-dfn-type=\"method\" id=\"dom-pushmanager-getsubscription\" data-idl=\"operation\" data-title=\"getSubscription\" data-type=\"Promise\" data-lt=\"getSubscription()\" data-local-lt=\"PushManager.getSubscription|PushManager.getSubscription()|getSubscription\" tabindex=\"0\" aria-haspopup=\"dialog\"><code>getSubscription</code></dfn> method when invoked <em class=\"rfc2119\">MUST<!---0.805918%--></em> run the\n        following steps:",
      "rationale": "let",
      "steps": [
        {
          "html": "Let <var>promise<!---0.805918%--></var> be <a data-cite=\"webidl\" data-cite-path=\"/\" data-cite-frag=\"a-new-promise\" data-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#a-new-promise\">a new promise</a>."
        },
        {
          "html": "Return <var>promise<!---0.805918%--></var> and continue the following steps asynchronously."
        },
        {
          "html": "If the <a data-cite=\"service-workers\" data-cite-path=\"/\" data-cite-frag=\"dfn-service-worker\" data-type=\"dfn\" href=\"https://www.w3.org/TR/service-workers/#dfn-service-worker\">Service Worker</a> is not subscribed, resolve <var>promise<!---0.805918%--></var> with null."
        },
        {
          "html": "Retrieve the <a href=\"https://w3c.github.io/push-api/#dfn-push-subscription\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-push-subscription-51\">push subscription</a> associated with the <a data-cite=\"service-workers\" data-cite-path=\"/\" data-cite-frag=\"dfn-service-worker\" data-type=\"dfn\" href=\"https://www.w3.org/TR/service-workers/#dfn-service-worker\">Service Worker</a>."
        },
        {
          "html": "If there is an error, reject <var>promise<!---0.805918%--></var> with a <a data-xref-type=\"_IDL_\" data-link-type=\"idl\" data-lt=\"DOMException\" data-cite=\"webidl\" data-cite-path=\"/\" data-cite-frag=\"idl-DOMException\" data-type=\"interface\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\"><code>DOMException<!---0.805918%--></code></a><!---0.805918%--> whose name is\n        \"<a data-link-type=\"idl\" data-cite=\"webidl\" data-xref-type=\"exception\" data-cite-path=\"/\" data-cite-frag=\"aborterror\" data-type=\"exception\" href=\"https://webidl.spec.whatwg.org/#aborterror\"><code>AbortError<!---0.805918%--></code></a>\"<!---0.805918%--> and terminate these steps."
        },
        {
          "html": "When the request has been completed, resolve <var>promise<!---0.805918%--></var> with a <a data-xref-type=\"_IDL_\" data-link-type=\"idl\" data-lt=\"PushSubscription\" href=\"https://w3c.github.io/push-api/#dom-pushsubscription\" class=\"internalDFN\" id=\"ref-for-dom-pushsubscription-16\"><code>PushSubscription<!---0.805918%--></code></a><!---0.805918%-->\n        providing the details of the retrieved <a href=\"https://w3c.github.io/push-api/#dfn-push-subscription\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-push-subscription-52\">push subscription</a>."
        }
      ]
    },
    {
      "name": "PushManager/permissionState()",
      "href": "https://w3c.github.io/push-api/#dom-pushmanager-permissionstate",
      "html": "The <dfn data-dfn-for=\"PushManager\" data-export=\"\" data-dfn-type=\"method\" id=\"dom-pushmanager-permissionstate\" data-idl=\"operation\" data-title=\"permissionState()\" data-type=\"Promise\" data-lt=\"permissionState()|permissionState(options)\" data-local-lt=\"PushManager.permissionState|PushManager.permissionState()|permissionState\" tabindex=\"0\" aria-haspopup=\"dialog\"><code>permissionState()</code></dfn> method when invoked <em class=\"rfc2119\">MUST<!---0.805918%--></em> run\n        the following steps:",
      "rationale": "let",
      "steps": [
        {
          "html": "Let <var>promise<!---0.805918%--></var> be <a data-cite=\"webidl\" data-cite-path=\"/\" data-cite-frag=\"a-new-promise\" data-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#a-new-promise\">a new promise</a>."
        },
        {
          "html": "Return <var>promise<!---0.805918%--></var> and continue the following steps asynchronously."
        },
        {
          "html": "Let <var>descriptor<!---0.805918%--></var> be a new <a data-xref-type=\"_IDL_\" data-link-type=\"idl\" data-lt=\"PermissionDescriptor\" data-cite=\"permissions\" data-cite-path=\"/\" data-cite-frag=\"dom-permissiondescriptor\" data-type=\"dictionary\" href=\"https://www.w3.org/TR/permissions/#dom-permissiondescriptor\"><code>PermissionDescriptor<!---0.805918%--></code></a><!---0.805918%--> with the\n        <!---0.805918%--><a data-link-type=\"idl\" data-xref-type=\"attribute|dict-member|const\" data-link-for=\"PermissionDescriptor\" data-xref-for=\"PermissionDescriptor\" data-cite=\"permissions\" data-cite-path=\"/\" data-cite-frag=\"dom-permissiondescriptor-name\" data-type=\"dict-member\" href=\"https://www.w3.org/TR/permissions/#dom-permissiondescriptor-name\"><code>name<!---0.805918%--></code></a><!---0.805918%-->} initialized to \"push\"."
        },
        {
          "html": "let <var>state<!---0.805918%--></var> be the <a data-link-type=\"dfn|abstract-op\" data-cite=\"permissions\" data-cite-path=\"/\" data-cite-frag=\"dfn-permission-state\" data-type=\"dfn\" href=\"https://www.w3.org/TR/permissions/#dfn-permission-state\">permission state<!---0.805918%--></a> of <var>descriptor<!---0.805918%--></var> and the result."
        },
        {
          "html": "Resolve <var>promise<!---0.805918%--></var> with <var>state<!---0.805918%--></var>."
        }
      ]
    },
    {
      "name": "PushSubscription/getKey()",
      "href": "https://w3c.github.io/push-api/#dom-pushsubscription-getkey",
      "html": "The <dfn data-export=\"\" data-dfn-type=\"method\" id=\"dom-pushsubscription-getkey\" data-idl=\"operation\" data-title=\"getKey()\" data-dfn-for=\"PushSubscription\" data-type=\"ArrayBuffer\" data-lt=\"getKey()|getKey(name)\" data-local-lt=\"PushSubscription.getKey|PushSubscription.getKey()|getKey\" tabindex=\"0\" aria-haspopup=\"dialog\"><code>getKey()</code></dfn> method retrieves keying material that can be used for encrypting\n        and authenticating messages. When <!---0.805918%--><a data-link-type=\"idl\" data-xref-type=\"method\" data-link-for=\"PushSubscription\" data-xref-for=\"PushSubscription\" data-lt=\"getKey()\" href=\"https://w3c.github.io/push-api/#dom-pushsubscription-getkey\" class=\"internalDFN\" id=\"ref-for-dom-pushsubscription-getkey-5\"><code>getKey<!---0.805918%--></code></a><code>(<!---0.805918%--><!---0.805918%--><!---0.805918%-->)</code><!---0.805918%--><!---0.805918%--> is invoked the following\n        process is followed:",
      "rationale": "find",
      "steps": [
        {
          "html": "Find the internal slot corresponding to the key named by the <code>name<!---0.805918%--></code> argument."
        },
        {
          "html": "If a slot was not found, return <code>null<!---0.805918%--></code>."
        },
        {
          "html": "Initialize a variable <var>key<!---0.805918%--></var> with a newly instantiated <a data-xref-type=\"_IDL_\" data-link-type=\"idl\" data-lt=\"ArrayBuffer\" data-cite=\"webidl\" data-cite-path=\"/\" data-cite-frag=\"idl-ArrayBuffer\" data-type=\"interface\" href=\"https://webidl.spec.whatwg.org/#idl-ArrayBuffer\"><code>ArrayBuffer<!---0.805918%--></code></a><!---0.805918%--> instance."
        },
        {
          "html": "If the internal slot contains an asymmetric key pair, set the contents of <var>key<!---0.805918%--></var> to the\n        serialized value of the public key from the key pair. This uses the serialization format\n        described in the specification that defines the name. For example, [<cite><a class=\"bibref\" data-link-type=\"biblio\" href=\"https://w3c.github.io/push-api/#bib-rfc8291\" title=\"Message Encryption for Web Push\">RFC8291<!---0.805918%--></a></cite><!---0.805918%-->] specifies\n        that the \"<a data-link-type=\"idl\" data-xref-type=\"enum-value\" data-link-for=\"PushEncryptionKeyName\" data-xref-for=\"PushEncryptionKeyName\" href=\"https://w3c.github.io/push-api/#dom-pushencryptionkeyname-p256dh\" class=\"internalDFN\" id=\"ref-for-dom-pushencryptionkeyname-p256dh-3\"><code>p256dh<!---0.805918%--></code></a>\"<!---0.805918%--> public key is encoded using the uncompressed\n        format defined in [<cite><a class=\"bibref\" data-link-type=\"biblio\" href=\"https://w3c.github.io/push-api/#bib-ansi-x9-62\" title=\"Public Key Cryptography for the Financial Services Industry, The Elliptic Curve Digital Signature Algorithm (ECDSA)\">ANSI-X9-62<!---0.805918%--></a></cite><!---0.805918%-->] Annex A (that is, a 65 octet sequence that starts with a\n        0x04 octet)."
        },
        {
          "html": "Otherwise, if the internal slot contains a symmetric key, set the contents of <var>key<!---0.805918%--></var> to\n        a copy of the value from the internal slot. For example, the <code>auth<!---0.805918%--></code> parameter contains an\n        octet sequence used by the <a href=\"https://w3c.github.io/push-api/#dfn-user-agent\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-user-agent-46\">user agent</a> to authenticate messages sent by an\n        <a href=\"https://w3c.github.io/push-api/#dfn-application-server\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-application-server-24\">application server</a>."
        },
        {
          "html": "Return <var>key<!---0.805918%--></var>."
        }
      ]
    },
    {
      "name": "PushSubscription/unsubscribed",
      "href": "https://w3c.github.io/push-api/#dom-pushsubscription-unsubscribe",
      "html": "The <dfn data-lt=\"unsubscribed|unsubscribe()\" data-export=\"\" data-dfn-type=\"method\" id=\"dom-pushsubscription-unsubscribe\" data-idl=\"operation\" data-title=\"unsubscribe()\" data-dfn-for=\"PushSubscription\" data-type=\"Promise\" data-local-lt=\"PushSubscription.unsubscribe|PushSubscription.unsubscribe()|unsubscribe\" tabindex=\"0\" aria-haspopup=\"dialog\"><code>unsubscribe()</code></dfn> method when invoked <em class=\"rfc2119\">MUST<!---0.805918%--></em> run the\n        following steps:",
      "rationale": "let",
      "steps": [
        {
          "html": "Let <var>promise<!---0.805918%--></var> be <a data-cite=\"webidl\" data-cite-path=\"/\" data-cite-frag=\"a-new-promise\" data-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#a-new-promise\">a new promise</a>."
        },
        {
          "html": "Return <var>promise<!---0.805918%--></var> and continue the following steps asynchronously."
        },
        {
          "html": "If the <a href=\"https://w3c.github.io/push-api/#dfn-push-subscription\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-push-subscription-64\">push subscription</a> has already been <a href=\"https://w3c.github.io/push-api/#dfn-deactivate\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-deactivate-8\">deactivated</a>, resolve <var>promise<!---0.805918%--></var>\n        with <code>false<!---0.805918%--></code> and terminate these steps."
        },
        {
          "html": "Run the following step in parallel:",
          "rationale": "deactivate",
          "steps": [
            {
              "html": "<a href=\"https://w3c.github.io/push-api/#dfn-deactivate\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-deactivate-9\">Deactivate</a> the <a href=\"https://w3c.github.io/push-api/#dfn-push-subscription\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-push-subscription-65\">push subscription</a>. The <a href=\"https://w3c.github.io/push-api/#dfn-user-agent\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-user-agent-47\">user agent</a> <em class=\"rfc2119\">MUST NOT<!---0.805918%--></em>\n              deliver any further <a href=\"https://w3c.github.io/push-api/#dfn-push-message\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-push-message-34\">push messages</a> for the <a href=\"https://w3c.github.io/push-api/#dfn-push-subscription\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-push-subscription-66\">push subscription</a>.\n              <p>\n                If the <a href=\"https://w3c.github.io/push-api/#dfn-user-agent\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-user-agent-48\">user agent</a> failed to request the <a href=\"https://w3c.github.io/push-api/#dfn-push-service\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-push-service-27\">push service</a> to\n                <a href=\"https://w3c.github.io/push-api/#dfn-deactivate\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-deactivate-10\">deactivate</a> the <a href=\"https://w3c.github.io/push-api/#dfn-push-subscription\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-push-subscription-67\">push subscription</a>, for example because of network\n                failures, it <em class=\"rfc2119\">SHOULD<!---0.805918%--></em> retry the request to the <a href=\"https://w3c.github.io/push-api/#dfn-push-service\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-push-service-28\">push service</a> for a reasonable\n                amount of time.\n              </p>"
            }
          ]
        },
        {
          "html": "Resolve <var>promise<!---0.805918%--></var> with <code>true<!---0.805918%--></code>."
        }
      ]
    },
    {
      "name": "PushSubscription/toJSON()",
      "href": "https://w3c.github.io/push-api/#dom-pushsubscription-tojson",
      "html": "The <dfn data-export=\"\" data-dfn-type=\"method\" id=\"dom-pushsubscription-tojson\" data-idl=\"operation\" data-title=\"toJSON()\" data-dfn-for=\"PushSubscription\" data-type=\"PushSubscriptionJSON\" data-lt=\"toJSON()\" data-local-lt=\"PushSubscription.toJSON|PushSubscription.toJSON()|toJSON\" tabindex=\"0\" aria-haspopup=\"dialog\"><code>toJSON()</code></dfn> method when invoked <em class=\"rfc2119\">MUST<!---0.805918%--></em> run the following steps:",
      "rationale": "let",
      "steps": [
        {
          "html": "Let <var data-type=\"PushSubscriptionJSON\">json<!---0.805918%--></var> be a new <a data-xref-type=\"_IDL_\" data-link-type=\"idl\" data-lt=\"PushSubscriptionJSON\" href=\"https://w3c.github.io/push-api/#dom-pushsubscriptionjson\" class=\"internalDFN\" id=\"ref-for-dom-pushsubscriptionjson-3\"><code>PushSubscriptionJSON<!---0.805918%--></code></a><!---0.805918%--> dictionary."
        },
        {
          "html": "Set <var data-type=\"PushSubscriptionJSON\">json<!---0.805918%--></var>[\"endpoint\"] to the result of <a data-link-type=\"dfn|abstract-op\" href=\"https://w3c.github.io/push-api/#dfn-getting-the-endpoint-attribute\" class=\"internalDFN\" id=\"ref-for-dfn-getting-the-endpoint-attribute-1\">getting the <code>endpoint<!---0.805918%--></code> attribute<!---0.805918%--></a> of\n        <a data-link-type=\"dfn|abstract-op\" data-cite=\"webidl\" data-cite-path=\"/\" data-cite-frag=\"this\" data-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\">this<!---0.805918%--></a>."
        },
        {
          "html": "Set <var data-type=\"PushSubscriptionJSON\">json<!---0.805918%--></var>[\"expirationTime\"] to the result of <a data-link-type=\"dfn|abstract-op\" href=\"https://w3c.github.io/push-api/#dfn-getting-the-expirationtime-attribute\" class=\"internalDFN\" id=\"ref-for-dfn-getting-the-expirationtime-attribute-1\">getting the <code>expirationTime<!---0.805918%--></code> attribute<!---0.805918%--></a> of <a data-link-type=\"dfn|abstract-op\" data-cite=\"webidl\" data-cite-path=\"/\" data-cite-frag=\"this\" data-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\">this<!---0.805918%--></a>."
        },
        {
          "html": "Let <var>keys<!---0.805918%--></var> be a new empty instance of <code>record&lt;DOMString, USVString&gt;<!---0.805918%--></code> ."
        },
        {
          "html": "For each identifier <var>i<!---0.805918%--></var> corresponding to keys in internal slots on the\n        <a data-xref-type=\"_IDL_\" data-link-type=\"idl\" data-lt=\"PushSubscription\" href=\"https://w3c.github.io/push-api/#dom-pushsubscription\" class=\"internalDFN\" id=\"ref-for-dom-pushsubscription-19\"><code>PushSubscription<!---0.805918%--></code></a><!---0.805918%-->, ordered by the name of the key:",
          "rationale": "if",
          "steps": [
            {
              "html": "If the internal slot corresponds to an asymmetric key pair, let <var>b<!---0.805918%--></var> be the encoded\n            value of the public key corresponding to the key name <var>i<!---0.805918%--></var>, using the encoding defined\n            for the key name (see <!---0.805918%--><a data-link-type=\"idl\" data-xref-type=\"method\" data-link-for=\"PushSubscription\" data-xref-for=\"PushSubscription\" data-lt=\"getKey()\" href=\"https://w3c.github.io/push-api/#dom-pushsubscription-getkey\" class=\"internalDFN\" id=\"ref-for-dom-pushsubscription-getkey-6\"><code>getKey<!---0.805918%--></code></a><code>(<!---0.805918%--><!---0.805918%--><!---0.805918%-->)</code><!---0.805918%--><!---0.805918%-->)."
            },
            {
              "html": "Otherwise, let <var>b<!---0.805918%--></var> be the value as returned by <!---0.805918%--><a data-link-type=\"idl\" data-xref-type=\"attribute|dict-member|const\" data-link-for=\"PushSubscription\" data-xref-for=\"PushSubscription\" href=\"https://w3c.github.io/push-api/#dom-pushsubscription-getkey\" class=\"internalDFN\" id=\"ref-for-dom-pushsubscription-getkey-7\"><code>getKey<!---0.805918%--></code></a><!---0.805918%-->."
            },
            {
              "html": "Let <var>s<!---0.805918%--></var> be the URL-safe base64 encoding without padding [<cite><a class=\"bibref\" data-link-type=\"biblio\" href=\"https://w3c.github.io/push-api/#bib-rfc4648\" title=\"The Base16, Base32, and Base64 Data Encodings\">RFC4648<!---0.805918%--></a></cite><!---0.805918%-->] of <var>b<!---0.805918%--></var> as a\n            <a data-xref-type=\"_IDL_\" data-link-type=\"idl\" data-lt=\"USVString\" data-cite=\"webidl\" data-cite-path=\"/\" data-cite-frag=\"idl-USVString\" data-type=\"interface\" href=\"https://webidl.spec.whatwg.org/#idl-USVString\"><code>USVString<!---0.805918%--></code></a><!---0.805918%-->. The <a href=\"https://w3c.github.io/push-api/#dfn-user-agent\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-user-agent-49\">user agent</a> <em class=\"rfc2119\">MUST<!---0.805918%--></em> use a serialization method that does not\n            branch based on the value of <var>b<!---0.805918%--></var>."
            },
            {
              "html": "Set <var>keys<!---0.805918%--></var>[<var>i<!---0.805918%--></var>] to <var>s<!---0.805918%--></var>."
            }
          ]
        },
        {
          "html": "Set <var data-type=\"PushSubscriptionJSON\">json<!---0.805918%--></var>[\"keys\"] to <var>keys<!---0.805918%--></var>."
        },
        {
          "html": "Return <var data-type=\"PushSubscriptionJSON\">json<!---0.805918%--></var>."
        }
      ]
    },
    {
      "name": "extract a byte sequence",
      "href": "https://w3c.github.io/push-api/#dfn-extract-a-byte-sequence",
      "html": "To <dfn id=\"dfn-extract-a-byte-sequence\" tabindex=\"0\" aria-haspopup=\"dialog\" data-dfn-type=\"dfn\">extract a byte sequence</dfn> from <var>object<!---0.805918%--></var>, run these steps:",
      "rationale": "let",
      "steps": [
        {
          "html": "Let <var>bytes<!---0.805918%--></var> be an empty byte sequence."
        },
        {
          "html": "Switch on <var>object<!---0.805918%--></var>'s type:\n          <dl data-cite=\"WebIDL\">\n            <dt>\n              <a data-xref-type=\"_IDL_\" data-link-type=\"idl\" data-lt=\"BufferSource\" data-cite=\"webidl\" data-cite-path=\"/\" data-cite-frag=\"BufferSource\" data-type=\"typedef\" href=\"https://webidl.spec.whatwg.org/#BufferSource\"><code>BufferSource<!---0.805918%--></code></a><!---0.805918%-->\n            </dt>\n            <dd>\n              Set <var>bytes<!---0.805918%--></var> to a copy of <var>object<!---0.805918%--></var>'s contents.\n            </dd>\n            <dt>\n              <a data-xref-type=\"_IDL_\" data-link-type=\"idl\" data-lt=\"USVString\" data-cite=\"webidl\" data-cite-path=\"/\" data-cite-frag=\"idl-USVString\" data-type=\"interface\" href=\"https://webidl.spec.whatwg.org/#idl-USVString\"><code>USVString<!---0.805918%--></code></a><!---0.805918%-->\n            </dt>\n            <dd data-cite=\"encoding\">\n              Set <var>bytes<!---0.805918%--></var> to the result of running <a data-cite=\"encoding\" data-cite-path=\"/\" data-cite-frag=\"utf-8-encode\" data-type=\"dfn\" href=\"https://encoding.spec.whatwg.org/#utf-8-encode\">utf-8 encode</a> on <var>object<!---0.805918%--></var>.\n            </dd>\n          </dl>"
        },
        {
          "html": "Return <var>bytes<!---0.805918%--></var>."
        }
      ]
    },
    {
      "name": "PushEvent/constructor()",
      "href": "https://w3c.github.io/push-api/#dom-pushevent-constructor",
      "html": "When a <dfn data-export=\"\" data-dfn-type=\"constructor\" id=\"dom-pushevent-constructor\" data-idl=\"constructor\" data-title=\"constructor\" data-dfn-for=\"PushEvent\" data-lt=\"constructor()|constructor(type)|constructor(type, eventInitDict)\" data-local-lt=\"PushEvent.constructor|PushEvent.constructor()|constructor\" tabindex=\"0\" aria-haspopup=\"dialog\"><code>constructor</code></dfn> of the <a href=\"https://w3c.github.io/push-api/#dom-pushevent\" class=\"internalDFN\" data-link-type=\"idl\" id=\"ref-for-dom-pushevent-2\"><code>PushEvent</code></a> interface, or of an interface that\n          inherits from the <a href=\"https://w3c.github.io/push-api/#dom-pushevent\" class=\"internalDFN\" data-link-type=\"idl\" id=\"ref-for-dom-pushevent-3\"><code>PushEvent</code></a> interface, is invoked, the usual <a data-cite=\"dom\" data-cite-path=\"/\" data-cite-frag=\"concept-event-constructor-ext\" data-type=\"dfn\" href=\"https://dom.spec.whatwg.org/#concept-event-constructor-ext\">event constructing\n          steps</a> are extended to include the following steps:",
      "rationale": "if",
      "steps": [
        {
          "html": "If <var>eventInitDict<!---0.805918%--></var>'s <code>data<!---0.805918%--></code> member is not present, set the <code>data<!---0.805918%--></code> attribute of the\n          event to <code>null<!---0.805918%--></code> and terminate these steps."
        },
        {
          "html": "Set <var>b<!---0.805918%--></var> to the result of <a data-lt=\"extract a byte sequence\" href=\"https://w3c.github.io/push-api/#dfn-extract-a-byte-sequence\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-extract-a-byte-sequence-1\">extracting a byte\n          sequence</a> from the \"<code>data<!---0.805918%--></code>\" member of <var>eventInitDict<!---0.805918%--></var>."
        },
        {
          "html": "Set the <code>data<!---0.805918%--></code> attribute of the event to a new <a href=\"https://w3c.github.io/push-api/#dom-pushmessagedata\" class=\"internalDFN\" data-link-type=\"idl\" id=\"ref-for-dom-pushmessagedata-4\"><code>PushMessageData</code></a> instance with\n          <code>bytes<!---0.805918%--></code> set to <var>b<!---0.805918%--></var>."
        }
      ]
    },
    {
      "html": "When the <a href=\"https://w3c.github.io/push-api/#dfn-user-agent\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-user-agent-51\">user agent</a> receives a <a href=\"https://w3c.github.io/push-api/#dfn-push-message\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-push-message-40\">push message</a> from the <a href=\"https://w3c.github.io/push-api/#dfn-push-service\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-push-service-29\">push service</a>,\n          it <em class=\"rfc2119\">MUST<!---0.805918%--></em> run the following steps.",
      "rationale": "let",
      "steps": [
        {
          "html": "Let <var>registration<!---0.805918%--></var> be the <a data-cite=\"service-workers\" data-cite-path=\"/\" data-cite-frag=\"dfn-service-worker-registration\" data-type=\"dfn\" href=\"https://www.w3.org/TR/service-workers/#dfn-service-worker-registration\">service worker registration</a> corresponding to the <a href=\"https://w3c.github.io/push-api/#dfn-push-message\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-push-message-41\">\n            push message</a>."
        },
        {
          "html": "If <var>registration<!---0.805918%--></var> is not found, abort these steps."
        },
        {
          "html": "Let <var>subscription<!---0.805918%--></var> be the active <a href=\"https://w3c.github.io/push-api/#dfn-push-subscription\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-push-subscription-69\">push subscription</a> for <var>registration<!---0.805918%--></var>."
        },
        {
          "html": "Initialize <var>data<!---0.805918%--></var> to a value of <code>null<!---0.805918%--></code>."
        },
        {
          "html": "If the <a href=\"https://w3c.github.io/push-api/#dfn-push-message\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-push-message-42\">push message</a> contains a payload, perform the following steps:",
          "rationale": "decrypt",
          "steps": [
            {
              "html": "Decrypt the <a href=\"https://w3c.github.io/push-api/#dfn-push-message\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-push-message-43\">push message</a> using the private key from the key pair\n              associated with <var>subscription<!---0.805918%--></var> and the process described in [<cite><a class=\"bibref\" data-link-type=\"biblio\" href=\"https://w3c.github.io/push-api/#bib-rfc8291\" title=\"Message Encryption for Web Push\">RFC8291<!---0.805918%--></a></cite><!---0.805918%-->]. This\n              produces the plain text of the message."
            },
            {
              "html": "If the <a href=\"https://w3c.github.io/push-api/#dfn-push-message\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-push-message-44\">push message</a> could not be decrypted for any reason, perform the\n              following steps:",
              "rationale": "acknowledge",
              "steps": [
                {
                  "html": "Acknowledge the receipt of the <a href=\"https://w3c.github.io/push-api/#dfn-push-message\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-push-message-45\">push message</a> according to [<cite><a class=\"bibref\" data-link-type=\"biblio\" href=\"https://w3c.github.io/push-api/#bib-rfc8030\" title=\"Generic Event Delivery Using HTTP Push\">RFC8030<!---0.805918%--></a></cite><!---0.805918%-->].\n                  Though the message was not successfully received and processed, this prevents the\n                  push service from attempting to retransmit the message; a badly encrypted message\n                  is not recoverable."
                },
                {
                  "html": "Discard the <a href=\"https://w3c.github.io/push-api/#dfn-push-message\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-push-message-46\">push message</a>."
                },
                {
                  "html": "Terminate this process."
                }
              ]
            },
            {
              "html": "Let <var>data<!---0.805918%--></var> be a new <a href=\"https://w3c.github.io/push-api/#dom-pushmessagedata\" class=\"internalDFN\" data-link-type=\"idl\" id=\"ref-for-dom-pushmessagedata-5\"><code>PushMessageData</code></a> instance with the decrypted plain text\n              of the <a href=\"https://w3c.github.io/push-api/#dfn-push-message\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-push-message-48\">push message</a>."
            }
          ]
        },
        {
          "html": "Then run the following steps in parallel, with <var>dispatchedEvent<!---0.805918%--></var>:",
          "rationale": "wait",
          "steps": [
            {
              "html": "Wait for all of the promises in the <a data-link-type=\"dfn|abstract-op\" data-link-for=\"ExtendableEvent\" data-xref-for=\"ExtendableEvent\" data-cite=\"service-workers\" data-cite-path=\"/\" data-cite-frag=\"extendableevent-extend-lifetime-promises\" data-type=\"dfn\" href=\"https://www.w3.org/TR/service-workers/#extendableevent-extend-lifetime-promises\">extend lifetime promises<!---0.805918%--></a>\n              of <var>dispatchedEvent<!---0.805918%--></var> to resolve."
            },
            {
              "html": "If all the promises resolve successfully, acknowledge the receipt of the <a href=\"https://w3c.github.io/push-api/#dfn-push-message\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-push-message-49\">push\n              message</a> according to [<cite><a class=\"bibref\" data-link-type=\"biblio\" href=\"https://w3c.github.io/push-api/#bib-rfc8030\" title=\"Generic Event Delivery Using HTTP Push\">RFC8030<!---0.805918%--></a></cite><!---0.805918%-->] and abort these steps."
            },
            {
              "html": "<p>\n                  If the same <a href=\"https://w3c.github.io/push-api/#dfn-push-message\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-push-message-50\">push message</a> has been delivered to a <a data-cite=\"service-workers\" data-cite-path=\"/\" data-cite-frag=\"dfn-service-worker-registration\" data-type=\"dfn\" href=\"https://www.w3.org/TR/service-workers/#dfn-service-worker-registration\">service worker\n                  registration</a> multiple times unsuccessfully, acknowledge the receipt of the\n                  <a href=\"https://w3c.github.io/push-api/#dfn-push-message\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-push-message-51\">push message</a> according to [<cite><a class=\"bibref\" data-link-type=\"biblio\" href=\"https://w3c.github.io/push-api/#bib-rfc8030\" title=\"Generic Event Delivery Using HTTP Push\">RFC8030<!---0.805918%--></a></cite><!---0.805918%-->].\n                </p>\n                <p>\n                  Acknowledging the <a href=\"https://w3c.github.io/push-api/#dfn-push-message\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-push-message-52\">push message</a> causes the <a href=\"https://w3c.github.io/push-api/#dfn-push-service\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-push-service-30\">push service</a> to stop\n                  delivering the message and to report success to the <a href=\"https://w3c.github.io/push-api/#dfn-application-server\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-application-server-25\">application server</a>.\n                  This prevents the same <a href=\"https://w3c.github.io/push-api/#dfn-push-message\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-push-message-53\">push message</a> from being retried by the <a href=\"https://w3c.github.io/push-api/#dfn-push-service\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-push-service-31\">push\n                  service</a> indefinitely.\n                </p>\n                <p>\n                  Acknowledging also means that an <a href=\"https://w3c.github.io/push-api/#dfn-application-server\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-application-server-26\">application server</a> could incorrectly\n                  receive a delivery receipt indicating successful delivery of the <a href=\"https://w3c.github.io/push-api/#dfn-push-message\" class=\"internalDFN\" data-link-type=\"dfn\" id=\"ref-for-dfn-push-message-54\">push\n                  message</a>. Therefore, multiple rejections <em class=\"rfc2119\">SHOULD<!---0.805918%--></em> be permitted before\n                  acknowledging; allowing at least three attempts is recommended.\n                </p>"
            }
          ]
        }
      ]
    }
  ]
}