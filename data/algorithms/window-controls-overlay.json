{
  "spec": {
    "title": "Window Controls Overlay",
    "url": "https://wicg.github.io/window-controls-overlay/"
  },
  "algorithms": [
    {
      "name": "title bar region resizes",
      "href": "https://wicg.github.io/window-controls-overlay/#dfn-title-bar-region-resizes",
      "html": "To <dfn data-lt=\"title bar region resizes|resize the title bar area\" id=\"dfn-title-bar-region-resizes\" tabindex=\"0\" aria-haspopup=\"dialog\" data-dfn-type=\"dfn\">resize the title bar\n          area</dfn> for a window <var>win<!---0.965536%--></var>, run these steps:",
      "rationale": "if",
      "steps": [
        {
          "html": "If <var>win<!---0.965536%--></var>'s <a data-link-type=\"dfn|abstract-op\" href=\"https://wicg.github.io/window-controls-overlay/#dfn-overlaid\" class=\"internalDFN\" id=\"ref-for-dfn-overlaid-5\">overlay<!---0.965536%--></a> has had its width or height changed (e.g.\n          as a result of the user resizing the browser window, or changing the\n          page zoom factor, or other UI appearing or disappearing on the\n          <a data-link-type=\"dfn|abstract-op\" href=\"https://wicg.github.io/window-controls-overlay/#dfn-overlaid\" class=\"internalDFN\" id=\"ref-for-dfn-overlaid-6\">overlay<!---0.965536%--></a>), since the last time these steps were run, <a data-link-type=\"dfn|abstract-op\" data-cite=\"dom\" data-cite-path=\"/\" data-cite-frag=\"concept-event-fire\" data-type=\"dfn\" href=\"https://dom.spec.whatwg.org/#concept-event-fire\">fire an event<!---0.965536%--></a> named <code>ongeometrychange<!---0.965536%--></code> at the <!---0.965536%--><a data-link-type=\"idl\" data-xref-type=\"attribute|dict-member|const\" data-link-for=\"Window\" data-xref-for=\"Window\" data-cite=\"html\" data-cite-path=\"/nav-history-apis.html\" data-cite-frag=\"dom-window\" data-type=\"attribute\" href=\"https://html.spec.whatwg.org/multipage/nav-history-apis.html#dom-window\"><code>window<!---0.965536%--></code></a><!---0.965536%--> object and\n          <a data-link-type=\"dfn|abstract-op\" href=\"https://wicg.github.io/window-controls-overlay/#dfn-update-the-overlay-area-information\" class=\"internalDFN\" id=\"ref-for-dfn-update-the-overlay-area-information-1\">update the overlay area information<!---0.965536%--></a>."
        }
      ]
    },
    {
      "name": "update the overlay area information",
      "href": "https://wicg.github.io/window-controls-overlay/#dfn-update-the-overlay-area-information",
      "html": "To <dfn id=\"dfn-update-the-overlay-area-information\" tabindex=\"0\" aria-haspopup=\"dialog\" data-dfn-type=\"dfn\">update the overlay area information</dfn>, run these steps:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "Let <var>ovls<!---0.965536%--></var> be a <a data-link-type=\"dfn|abstract-op\" data-cite=\"infra\" data-cite-path=\"/\" data-cite-frag=\"list\" data-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#list\">list<!---0.965536%--></a> of regions defined by the <a data-link-type=\"dfn|abstract-op\" href=\"https://wicg.github.io/window-controls-overlay/#dfn-overlaid\" class=\"internalDFN\" id=\"ref-for-dfn-overlaid-7\">overlays<!---0.965536%--></a>\n          that house the <a data-link-type=\"dfn|abstract-op\" href=\"https://wicg.github.io/window-controls-overlay/#dfn-controls-of-the-window\" class=\"internalDFN\" id=\"ref-for-dfn-controls-of-the-window-9\">window controls<!---0.965536%--></a> on the the window frame."
        },
        {
          "html": "Let <var>tba<!---0.965536%--></var> be an empty <a data-xref-type=\"_IDL_\" data-link-type=\"idl\" data-lt=\"DOMRect\" data-cite=\"geometry-1\" data-cite-path=\"/\" data-cite-frag=\"domrect\" data-type=\"interface\" href=\"https://www.w3.org/TR/geometry-1/#domrect\"><code>DOMRect<!---0.965536%--></code></a><!---0.965536%--> object representing the\n          available title bar area.",
          "rationale": "if",
          "steps": [
            {
              "html": "If there is only one overlay region in <var>ovls<!---0.965536%--></var>, set <var>tba<!---0.965536%--></var> as a\n              <a data-xref-type=\"_IDL_\" data-link-type=\"idl\" data-lt=\"DOMRect\" data-cite=\"geometry-1\" data-cite-path=\"/\" data-cite-frag=\"domrect\" data-type=\"interface\" href=\"https://www.w3.org/TR/geometry-1/#domrect\"><code>DOMRect<!---0.965536%--></code></a><!---0.965536%--> that encompasses the area from the edge of the frame\n              to the innermost edge of the <var>ovls<!---0.965536%--></var>."
            },
            {
              "html": "If there is more than one overlay region in <var>ovls<!---0.965536%--></var>, set <var>tba<!---0.965536%--></var>\n              to a <a data-xref-type=\"_IDL_\" data-link-type=\"idl\" data-lt=\"DOMRect\" data-cite=\"geometry-1\" data-cite-path=\"/\" data-cite-frag=\"domrect\" data-type=\"interface\" href=\"https://www.w3.org/TR/geometry-1/#domrect\"><code>DOMRect<!---0.965536%--></code></a><!---0.965536%--> that encompasses the area between the\n              intersection of the regions in <var>ovls<!---0.965536%--></var> and the <a data-link-type=\"dfn|abstract-op\" data-cite=\"dom\" data-cite-path=\"/\" data-cite-frag=\"concept-document\" data-type=\"dfn\" href=\"https://dom.spec.whatwg.org/#concept-document\">document<!---0.965536%--></a>'s\n              <a href=\"https://drafts.csswg.org/css2/#viewport\">viewport</a>."
            },
            {
              "html": "<var>tba<!---0.965536%--></var>'s height should be the same as the height of the\n              regions in <var>ovls<!---0.965536%--></var>."
            }
          ]
        },
        {
          "html": "Make <!---0.965536%--><a data-link-type=\"idl\" data-xref-type=\"attribute|dict-member|const\" data-link-for=\"Window\" data-xref-for=\"Window\" data-cite=\"html\" data-cite-path=\"/nav-history-apis.html\" data-cite-frag=\"dom-window\" data-type=\"attribute\" href=\"https://html.spec.whatwg.org/multipage/nav-history-apis.html#dom-window\"><code>window<!---0.965536%--></code></a><!---0.965536%-->.[[TitleBarArea]] equal to <var>tba<!---0.965536%--></var>."
        },
        {
          "html": "Update the <a data-link-type=\"dfn|abstract-op\" href=\"https://wicg.github.io/window-controls-overlay/#dfn-title-bar-area-env-variables\" class=\"internalDFN\" id=\"ref-for-dfn-title-bar-area-env-variables-2\">title bar area env variables<!---0.965536%--></a> with information from\n          <!---0.965536%--><a data-link-type=\"idl\" data-xref-type=\"attribute|dict-member|const\" data-link-for=\"Window\" data-xref-for=\"Window\" data-cite=\"html\" data-cite-path=\"/nav-history-apis.html\" data-cite-frag=\"dom-window\" data-type=\"attribute\" href=\"https://html.spec.whatwg.org/multipage/nav-history-apis.html#dom-window\"><code>window<!---0.965536%--></code></a><!---0.965536%-->.[[TitleBarArea]]."
        }
      ]
    }
  ]
}